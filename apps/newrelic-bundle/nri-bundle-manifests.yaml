---
# Source: nri-bundle/charts/k8s-agents-operator/templates/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: newrelic-bundle-k8s-agents-operator
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
  annotations:
---
# Source: nri-bundle/charts/kube-state-metrics/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: true
metadata:
  labels:
    helm.sh/chart: kube-state-metrics-5.30.1
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: metrics
    app.kubernetes.io/part-of: kube-state-metrics
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/version: "2.15.0"
  name: newrelic-bundle-kube-state-metrics
  namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
  name: newrelic-bundle-newrelic-infra-operator
  namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/controlplane/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-controlplane
  namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-newrelic-infrastructure
  namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-logging/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: newrelic-logging
    chart: newrelic-logging-1.31.0
    heritage: "Helm"
    release: "newrelic-bundle"
  name: newrelic-bundle-newrelic-logging
  namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-prometheus-agent/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-prometheus-agent
    app.kubernetes.io/version: v3.7.0-rc.0
    helm.sh/chart: newrelic-prometheus-agent-2.4.1
  name: newrelic-bundle-newrelic-prometheus-agent
  namespace: newrelic
---
# Source: nri-bundle/charts/nri-kube-events/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-kube-events-3.16.1
  name: newrelic-bundle-nri-kube-events
  namespace: newrelic
  annotations:
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-infra-operator-config
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
data:
  operator.yaml:
    |-
      ignoreMutationErrors: true
      infraAgentInjection:
        agentConfig:
          configSelectors:
          - extraEnvVars:
              DISABLE_KUBE_STATE_METRICS: "true"
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/name
                operator: NotIn
                values:
                - kube-state-metrics
              - key: app
                operator: NotIn
                values:
                - kube-state-metrics
              - key: k8s-app
                operator: NotIn
                values:
                - kube-state-metrics
            resourceRequirements:
              limits:
                cpu: 200m
                memory: 100M
              requests:
                cpu: 100m
                memory: 50M
          - labelSelector:
              matchLabels:
                k8s-app: kube-state-metrics
            resourceRequirements:
              limits:
                cpu: 300m
                memory: 300M
              requests:
                cpu: 150m
                memory: 150M
          - labelSelector:
              matchLabels:
                app: kube-state-metrics
            resourceRequirements:
              limits:
                cpu: 300m
                memory: 300M
              requests:
                cpu: 150m
                memory: 150M
          - labelSelector:
              matchLabels:
                app.kubernetes.io/name: kube-state-metrics
            resourceRequirements:
              limits:
                cpu: 300m
                memory: 300M
              requests:
                cpu: 150m
                memory: 150M
          customAttributes:
          - defaultValue: serverless
            name: computeType
          - fromLabel: eks.amazonaws.com/fargate-profile
            name: fargateProfile
          image:
            pullPolicy: IfNotPresent
            repository: newrelic/infrastructure-k8s
            tag: 2.13.15-unprivileged
        policies:
        - podSelector:
            matchExpressions:
            - key: eks.amazonaws.com/fargate-profile
              operator: Exists
        resourcePrefix: newrelic-bundle-newrelic-infra-operator
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/controlplane/agent-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-agent-controlplane
data:
  newrelic-infra.yml: |-
    # This is the configuration file for the infrastructure agent. See:
    # https://docs.newrelic.com/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/
    custom_attributes:
      clusterName: kmullaney-gts-training-k8s-8
    http_server_enabled: true
    http_server_port: 8001
    is_forward_only: true
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/controlplane/scraper-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-controlplane
  namespace: newrelic
data:
  nri-kubernetes.yml: |-
    interval: 15s
    namespaceSelector: {}
    controlPlane:
      retries: 3
      timeout: 10s
      enabled: true
      etcd:
        autodiscover:
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:4001
          - url: http://localhost:2381
          matchNode: true
          namespace: kube-system
          selector: tier=control-plane,component=etcd
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:4001
          matchNode: true
          namespace: kube-system
          selector: k8s-app=etcd-manager-main
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:4001
          matchNode: true
          namespace: kube-system
          selector: k8s-app=etcd
        enabled: true
      scheduler:
        autodiscover:
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10259
          matchNode: true
          namespace: kube-system
          selector: tier=control-plane,component=kube-scheduler
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10259
          matchNode: true
          namespace: kube-system
          selector: k8s-app=kube-scheduler
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10259
          matchNode: true
          namespace: openshift-kube-scheduler
          selector: app=openshift-kube-scheduler,scheduler=true
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10259
          matchNode: true
          namespace: kube-system
          selector: app=openshift-kube-scheduler,scheduler=true
        enabled: true
      controllerManager:
        autodiscover:
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: kube-system
          selector: tier=control-plane,component=kube-controller-manager
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: kube-system
          selector: k8s-app=kube-controller-manager
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: openshift-kube-controller-manager
          selector: app=kube-controller-manager,kube-controller-manager=true
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: kube-system
          selector: app=kube-controller-manager,kube-controller-manager=true
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:10257
          matchNode: true
          namespace: kube-system
          selector: app=controller-manager,controller-manager=true
        enabled: true
      apiServer:
        autodiscover:
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:8443
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:6443
          - url: http://localhost:8080
          matchNode: true
          namespace: kube-system
          selector: tier=control-plane,component=kube-apiserver
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:8443
          - url: http://localhost:8080
          matchNode: true
          namespace: kube-system
          selector: k8s-app=kube-apiserver
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:8443
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:6443
          matchNode: true
          namespace: openshift-kube-apiserver
          selector: app=openshift-kube-apiserver,apiserver=true
        - endpoints:
          - auth:
              type: bearer
            insecureSkipVerify: true
            url: https://localhost:8443
          matchNode: true
          namespace: kube-system
          selector: app=openshift-kube-apiserver,apiserver=true
        enabled: true
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/ksm/agent-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-agent-ksm
data:
  newrelic-infra.yml: |-
    # This is the configuration file for the infrastructure agent. See:
    # https://docs.newrelic.com/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/
    custom_attributes:
      clusterName: kmullaney-gts-training-k8s-8
    http_server_enabled: true
    http_server_port: 8002
    is_forward_only: true
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/ksm/scraper-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-ksm
  namespace: newrelic
data:
  nri-kubernetes.yml: |-
    interval: 15s
    namespaceSelector: {}
    ksm:
      enabled: true
      retries: 3
      scheme: http
      selector: app.kubernetes.io/name=kube-state-metrics
      timeout: 10s
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/kubelet/agent-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-agent-kubelet
data:
  newrelic-infra.yml: |-
    # This is the configuration file for the infrastructure agent. See:
    # https://docs.newrelic.com/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/
    custom_attributes:
      clusterName: kmullaney-gts-training-k8s-8
    features:
      docker_enabled: false
    http_server_enabled: true
    http_server_port: 8003
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/kubelet/integrations-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-integrations-cfg
data:
  # This ConfigMap holds config files for integrations. They should have the following format:
  #redis-config.yml: |
  #  # Run auto discovery to find pods with label "app=redis"
  #  discovery:
  #    command:
  #      # Run discovery for Kubernetes. Use the following optional arguments:
  #      # --namespaces: Comma separated list of namespaces to discover pods on
  #      # --tls: Use secure (TLS) connection
  #      # --port: Port used to connect to the kubelet. Default is 10255
  #      exec: /var/db/newrelic-infra/nri-discovery-kubernetes --port PORT --tls
  #      match:
  #        label.app: redis
  #  integrations:
  #    - name: nri-redis
  #      env:
  #        # using the discovered IP as the hostname address
  #        HOSTNAME: ${discovery.ip}
  #        PORT: 6379
  #        KEYS: '{"0":["<KEY_1>"],"1":["<KEY_2>"]}'
  #        REMOTE_MONITORING: true
  #      labels:
  #        env: production
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/kubelet/scraper-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-kubelet
  namespace: newrelic
data:
  nri-kubernetes.yml: |
    interval: 15s
    namespaceSelector: {}
    kubelet:
      enabled: true
      retries: 3
      scraperMaxReruns: 4
      timeout: 10s
---
# Source: nri-bundle/charts/newrelic-logging/templates/configmap-lua.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-logging-lua
data:
  payload.lua: |-
    function build_payload(tag, timestamp, record)
        local payload = {{
            metrics = {{
                name = "fluentbit_build_info",
                type = "count",
                value = 0,
                timestamp = os.time(),
                attributes = {
                    app = "fluent-bit",
                    source = "kubernetes",
                    version = record["fluentBitVersion"],
                    namespace = os.getenv("NAMESPACE"),
                    cluster_name = os.getenv("CLUSTER_NAME"),
                    daemonset_name = os.getenv("DAEMONSET_NAME"),
                    tier= os.getenv("FLUENTBIT_METRICS_TIER")            },
                ["interval.ms"] = 10000
            }}
        }}
        return 2, timestamp, payload
    end
---
# Source: nri-bundle/charts/newrelic-logging/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: newrelic
  labels:
    app: newrelic-logging
    chart: newrelic-logging-1.31.0
    heritage: Helm
    release: newrelic-bundle
    app.kubernetes.io/name: newrelic-logging
  name: newrelic-bundle-newrelic-logging-fluent-bit-config
data:
  fluent-bit.conf: |
    [SERVICE]
        Flush         1
        Log_Level     ${LOG_LEVEL}
        Daemon        off
        Parsers_File  parsers.conf
        HTTP_Server   On
        HTTP_Listen   0.0.0.0
        HTTP_Port     2020

    [INPUT]
        Name              tail
        Alias             pod-logs-tailer
        Tag               kube.*
        Path              ${PATH}
        multiline.parser  ${LOG_PARSER}
        DB                ${FB_DB}
        Mem_Buf_Limit     7MB
        Skip_Long_Lines   On
        Refresh_Interval  10

    [FILTER]
        Name                kubernetes
        Alias               kubernetes-enricher
        Match               kube.*
        # We need the full DNS suffix as Windows only supports resolving names with this suffix
        # See: https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#dns-limitations
        Kube_URL            https://kubernetes.default.svc.cluster.local:443
        Buffer_Size         ${K8S_BUFFER_SIZE}
        K8S-Logging.Exclude ${K8S_LOGGING_EXCLUDE}

    [FILTER]
        Name           record_modifier
        Alias          node-attributes-enricher
        Match          *
        Record         cluster_name "${CLUSTER_NAME}"

    [OUTPUT]
        Name           newrelic
        Match          *
        Alias          newrelic-logs-forwarder
        licenseKey     ${LICENSE_KEY}
        endpoint       ${ENDPOINT}
        lowDataMode    ${LOW_DATA_MODE}
        sendMetrics    ${SEND_OUTPUT_PLUGIN_METRICS}
        Retry_Limit    ${RETRY_LIMIT}


    [INPUT]
        Name   dummy
        Tag    buildInfo
        Dummy  {"message":"trigger for basic metric at every 10 minutes scrape_interval"}
        Interval_Sec 600
    [FILTER]
        Name    modify
        Match   buildInfo
        Add     fluentBitVersion  ${FBVERSION}
    [FILTER]
        Name    lua
        Match   buildInfo
        script  /fluent-bit/scripts/payload.lua
        call    build_payload
    [OUTPUT]
        Name    http
        Match   buildInfo
        Host    ${METRICS_HOST}
        Port    443
        URI     /metric/v1
        Format  json
        tls     On
        Header  Api-Key ${LICENSE_KEY}
        Header  Content-Type application/json
        json_date_key false
  parsers.conf: |
---
# Source: nri-bundle/charts/newrelic-prometheus-agent/templates/configmap.yaml
kind: ConfigMap
metadata:
  name: newrelic-bundle-newrelic-prometheus-agent
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-prometheus-agent
    app.kubernetes.io/version: v3.7.0-rc.0
    helm.sh/chart: newrelic-prometheus-agent-2.4.1
apiVersion: v1
data:
  config.yaml: |-
    # Configuration for newrelic-prometheus-configurator
    newrelic_remote_write:
      extra_write_relabel_configs:
      - action: replace
        regex: timeseries_write_(.*)
        replacement: counter
        separator: ;
        source_labels:
        - __name__
        target_label: newrelic_metric_type
      - action: replace
        regex: sql_byte(.*)
        replacement: counter
        separator: ;
        source_labels:
        - __name__
        target_label: newrelic_metric_type
    static_targets:
      jobs:
      - extra_metric_relabel_config:
        - action: keep
          regex: prometheus_agent_active_series|prometheus_target_interval_length_seconds|prometheus_target_scrape_pool_targets|prometheus_remote_storage_samples_pending|prometheus_remote_storage_samples_in_total|prometheus_remote_storage_samples_retried_total|prometheus_agent_corruptions_total|prometheus_remote_storage_shards|prometheus_sd_kubernetes_events_total|prometheus_agent_checkpoint_creations_failed_total|prometheus_agent_checkpoint_deletions_failed_total|prometheus_remote_storage_samples_dropped_total|prometheus_remote_storage_samples_failed_total|prometheus_sd_kubernetes_http_request_total|prometheus_agent_truncate_duration_seconds_sum|prometheus_build_info|process_resident_memory_bytes|process_virtual_memory_bytes|process_cpu_seconds_total|prometheus_remote_storage_bytes_total
          source_labels:
          - __name__
        job_name: self-metrics
        skip_sharding: true
        targets:
        - localhost:9090
    common:
      external_labels:
        cluster_name: kmullaney-gts-training-k8s-8
      scrape_interval: 30s
    kubernetes:
      jobs:
      - job_name_prefix: prometheus-scrape
        target_discovery:
          endpoints: true
          filter:
            annotations:
              prometheus.io/scrape: true
          pod: true
      integrations_filter:
        app_values:
        - java-app-service
        - express-app-service
        - python-app-service
        enabled: true
        source_labels:
        - app.kubernetes.io/name
---
# Source: nri-bundle/charts/nri-kube-events/templates/agent-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-kube-events-3.16.1
  name: newrelic-bundle-nri-kube-events-agent-config
  namespace: newrelic
data:
  newrelic-infra.yml: |
    is_forward_only: true
    http_server_enabled: true
    http_server_port: 8001
---
# Source: nri-bundle/charts/nri-kube-events/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-kube-events-3.16.1
  name: newrelic-bundle-nri-kube-events-config
  namespace: newrelic
data:
  config.yaml: |-
    sinks:
      - name: newRelicInfra
        config:
          agentEndpoint: http://localhost:8001/v1/data
          clusterName: kmullaney-gts-training-k8s-8
          agentHTTPTimeout: 30s
    captureDescribe: true
    describeRefresh: 24h
    captureEvents: true
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/instrumentation-crd.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.3
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
  name: instrumentations.newrelic.com
spec:
  conversion:
    strategy: Webhook
    webhook:
      clientConfig:
        caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
        service:
          name: newrelic-bundle-k8s-agents-operator-webhook-service
          namespace: newrelic
          path: /convert
      conversionReviewVersions:
        - v1alpha2
        - v1beta1
  group: newrelic.com
  names:
    kind: Instrumentation
    listKind: InstrumentationList
    plural: instrumentations
    shortNames:
      - nragent
      - nragents
    singular: instrumentation
  scope: Namespaced
  versions:
    - additionalPrinterColumns:
        - jsonPath: .metadata.creationTimestamp
          name: Age
          type: date
      name: v1alpha2
      schema:
        openAPIV3Schema:
          description: Instrumentation is the Schema for the instrumentations API
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: InstrumentationSpec defines the desired state of Instrumentation
              properties:
                agent:
                  description: Agent defines configuration for agent instrumentation.
                  properties:
                    env:
                      description: |-
                        Env defines Go specific env vars. There are four layers for env vars' definitions and
                        the precedence order is: `original container env vars` > `language specific env vars` > `common env vars` > `instrument spec configs' vars`.
                        If the former var had been defined, then the other vars would be ignored.
                      items:
                        description: EnvVar represents an environment variable present
                          in a Container.
                        properties:
                          name:
                            description: Name of the environment variable. Must be a
                              C_IDENTIFIER.
                            type: string
                          value:
                            description: |-
                              Variable references $(VAR_NAME) are expanded
                              using the previously defined environment variables in the container and
                              any service environment variables. If a variable cannot be resolved,
                              the reference in the input string will be unchanged. Double $$ are reduced
                              to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                              "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                              Escaped references will never be expanded, regardless of whether the variable
                              exists or not.
                              Defaults to "".
                            type: string
                          valueFrom:
                            description: Source for the environment variable's value.
                              Cannot be used if value is not empty.
                            properties:
                              configMapKeyRef:
                                description: Selects a key of a ConfigMap.
                                properties:
                                  key:
                                    description: The key to select.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the ConfigMap or its
                                      key must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                              fieldRef:
                                description: |-
                                  Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                  spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                properties:
                                  apiVersion:
                                    description: Version of the schema the FieldPath
                                      is written in terms of, defaults to "v1".
                                    type: string
                                  fieldPath:
                                    description: Path of the field to select in the
                                      specified API version.
                                    type: string
                                required:
                                  - fieldPath
                                type: object
                                x-kubernetes-map-type: atomic
                              resourceFieldRef:
                                description: |-
                                  Selects a resource of the container: only resources limits and requests
                                  (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                properties:
                                  containerName:
                                    description: 'Container name: required for volumes,
                                    optional for env vars'
                                    type: string
                                  divisor:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    description: Specifies the output format of the
                                      exposed resources, defaults to "1"
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  resource:
                                    description: 'Required: resource to select'
                                    type: string
                                required:
                                  - resource
                                type: object
                                x-kubernetes-map-type: atomic
                              secretKeyRef:
                                description: Selects a key of a secret in the pod's
                                  namespace
                                properties:
                                  key:
                                    description: The key of the secret to select from.  Must
                                      be a valid secret key.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the Secret or its key
                                      must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                        required:
                          - name
                        type: object
                      type: array
                    image:
                      description: Image is a container image with Go SDK and auto-instrumentation.
                      type: string
                    language:
                      description: Language is the language that will be instrumented.
                      type: string
                    resourceRequirements:
                      description: Resources describes the compute resource requirements.
                      properties:
                        claims:
                          description: |-
                            Claims lists the names of resources, defined in spec.resourceClaims,
                            that are used by this container.

                            This is an alpha field and requires enabling the
                            DynamicResourceAllocation feature gate.

                            This field is immutable. It can only be set for containers.
                          items:
                            description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                            properties:
                              name:
                                description: |-
                                  Name must match the name of one entry in pod.spec.resourceClaims of
                                  the Pod where this field is used. It makes that resource available
                                  inside a container.
                                type: string
                              request:
                                description: |-
                                  Request is the name chosen for a request in the referenced claim.
                                  If empty, everything from the claim is made available, otherwise
                                  only the result of this request.
                                type: string
                            required:
                              - name
                            type: object
                          type: array
                          x-kubernetes-list-map-keys:
                            - name
                          x-kubernetes-list-type: map
                        limits:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Limits describes the maximum amount of compute resources allowed.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Requests describes the minimum amount of compute resources required.
                            If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                            otherwise to an implementation-defined value. Requests cannot exceed Limits.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                      type: object
                    volumeLimitSize:
                      anyOf:
                        - type: integer
                        - type: string
                      description: |-
                        VolumeSizeLimit defines size limit for volume used for auto-instrumentation.
                        The default size is 200Mi.
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                  type: object
                exporter:
                  description: Exporter defines exporter configuration.
                  properties:
                    endpoint:
                      description: Endpoint is address of the collector with OTLP endpoint.
                      type: string
                  type: object
                licenseKeySecret:
                  description: |-
                    LicenseKeySecret defines where to take the licenseKeySecret.
                    it should be present in the operator namespace.
                  type: string
                namespaceLabelSelector:
                  description: PodLabelSelector defines to which pods the config should
                    be applied.
                  properties:
                    matchExpressions:
                      description: matchExpressions is a list of label selector requirements.
                        The requirements are ANDed.
                      items:
                        description: |-
                          A label selector requirement is a selector that contains values, a key, and an operator that
                          relates the key and values.
                        properties:
                          key:
                            description: key is the label key that the selector applies
                              to.
                            type: string
                          operator:
                            description: |-
                              operator represents a key's relationship to a set of values.
                              Valid operators are In, NotIn, Exists and DoesNotExist.
                            type: string
                          values:
                            description: |-
                              values is an array of string values. If the operator is In or NotIn,
                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                              the values array must be empty. This array is replaced during a strategic
                              merge patch.
                            items:
                              type: string
                            type: array
                            x-kubernetes-list-type: atomic
                        required:
                          - key
                          - operator
                        type: object
                      type: array
                      x-kubernetes-list-type: atomic
                    matchLabels:
                      additionalProperties:
                        type: string
                      description: |-
                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                      type: object
                  type: object
                  x-kubernetes-map-type: atomic
                podLabelSelector:
                  description: PodLabelSelector defines to which pods the config should
                    be applied.
                  properties:
                    matchExpressions:
                      description: matchExpressions is a list of label selector requirements.
                        The requirements are ANDed.
                      items:
                        description: |-
                          A label selector requirement is a selector that contains values, a key, and an operator that
                          relates the key and values.
                        properties:
                          key:
                            description: key is the label key that the selector applies
                              to.
                            type: string
                          operator:
                            description: |-
                              operator represents a key's relationship to a set of values.
                              Valid operators are In, NotIn, Exists and DoesNotExist.
                            type: string
                          values:
                            description: |-
                              values is an array of string values. If the operator is In or NotIn,
                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                              the values array must be empty. This array is replaced during a strategic
                              merge patch.
                            items:
                              type: string
                            type: array
                            x-kubernetes-list-type: atomic
                        required:
                          - key
                          - operator
                        type: object
                      type: array
                      x-kubernetes-list-type: atomic
                    matchLabels:
                      additionalProperties:
                        type: string
                      description: |-
                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                      type: object
                  type: object
                  x-kubernetes-map-type: atomic
                propagators:
                  description: |-
                    Propagators defines inter-process context propagation configuration.
                    Values in this list will be set in the OTEL_PROPAGATORS env var.
                    Enum=tracecontext;none
                  items:
                    description: Propagator represents the propagation type.
                    enum:
                      - tracecontext
                      - none
                    type: string
                  type: array
                resource:
                  description: Resource defines the configuration for the resource attributes,
                    as defined by the OpenTelemetry specification.
                  properties:
                    addK8sUIDAttributes:
                      description: AddK8sUIDAttributes defines whether K8s UID attributes
                        should be collected (e.g. k8s.deployment.uid).
                      type: boolean
                    resourceAttributes:
                      additionalProperties:
                        type: string
                      description: |-
                        Attributes defines attributes that are added to the resource.
                        For example environment: dev
                      type: object
                  type: object
                sampler:
                  description: Sampler defines sampling configuration.
                  properties:
                    argument:
                      description: |-
                        Argument defines sampler argument.
                        The value depends on the sampler type.
                        For instance for parentbased_traceidratio sampler type it is a number in range [0..1] e.g. 0.25.
                        The value will be set in the OTEL_TRACES_SAMPLER_ARG env var.
                      type: string
                    type:
                      description: |-
                        Type defines sampler type.
                        The value will be set in the OTEL_TRACES_SAMPLER env var.
                        The value can be for instance parentbased_always_on, parentbased_always_off, parentbased_traceidratio...
                      enum:
                        - always_on
                        - always_off
                        - traceidratio
                        - parentbased_always_on
                        - parentbased_always_off
                        - parentbased_traceidratio
                      type: string
                  type: object
              type: object
            status:
              description: InstrumentationStatus defines the observed state of Instrumentation
              type: object
          type: object
      served: true
      storage: false
      subresources:
        status: {}
    - additionalPrinterColumns:
        - jsonPath: .metadata.creationTimestamp
          name: Age
          type: date
        - jsonPath: .status.podsMatching
          name: PodsMatching
          type: integer
        - jsonPath: .status.podsInjected
          name: PodsInjected
          type: integer
        - jsonPath: .status.podsNotReady
          name: PodsNotReady
          type: integer
        - jsonPath: .status.podsOutdated
          name: PodsOutdated
          type: integer
        - jsonPath: .status.podsHealthy
          name: PodsHealthy
          type: integer
        - jsonPath: .status.podsUnhealthy
          name: PodsUnhealthy
          type: integer
      name: v1beta1
      schema:
        openAPIV3Schema:
          description: Instrumentation is the Schema for the instrumentations API
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: InstrumentationSpec defines the desired state of Instrumentation
              properties:
                agent:
                  description: Agent defines configuration for agent instrumentation.
                  properties:
                    env:
                      description: |-
                        Env defines Go specific env vars. There are four layers for env vars' definitions and
                        the precedence order is: `original container env vars` > `language specific env vars` > `common env vars` > `instrument spec configs' vars`.
                        If the former var had been defined, then the other vars would be ignored.
                      items:
                        description: EnvVar represents an environment variable present
                          in a Container.
                        properties:
                          name:
                            description: Name of the environment variable. Must be a
                              C_IDENTIFIER.
                            type: string
                          value:
                            description: |-
                              Variable references $(VAR_NAME) are expanded
                              using the previously defined environment variables in the container and
                              any service environment variables. If a variable cannot be resolved,
                              the reference in the input string will be unchanged. Double $$ are reduced
                              to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                              "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                              Escaped references will never be expanded, regardless of whether the variable
                              exists or not.
                              Defaults to "".
                            type: string
                          valueFrom:
                            description: Source for the environment variable's value.
                              Cannot be used if value is not empty.
                            properties:
                              configMapKeyRef:
                                description: Selects a key of a ConfigMap.
                                properties:
                                  key:
                                    description: The key to select.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the ConfigMap or its
                                      key must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                              fieldRef:
                                description: |-
                                  Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                  spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                properties:
                                  apiVersion:
                                    description: Version of the schema the FieldPath
                                      is written in terms of, defaults to "v1".
                                    type: string
                                  fieldPath:
                                    description: Path of the field to select in the
                                      specified API version.
                                    type: string
                                required:
                                  - fieldPath
                                type: object
                                x-kubernetes-map-type: atomic
                              resourceFieldRef:
                                description: |-
                                  Selects a resource of the container: only resources limits and requests
                                  (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                properties:
                                  containerName:
                                    description: 'Container name: required for volumes,
                                    optional for env vars'
                                    type: string
                                  divisor:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    description: Specifies the output format of the
                                      exposed resources, defaults to "1"
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  resource:
                                    description: 'Required: resource to select'
                                    type: string
                                required:
                                  - resource
                                type: object
                                x-kubernetes-map-type: atomic
                              secretKeyRef:
                                description: Selects a key of a secret in the pod's
                                  namespace
                                properties:
                                  key:
                                    description: The key of the secret to select from.  Must
                                      be a valid secret key.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the Secret or its key
                                      must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                        required:
                          - name
                        type: object
                      type: array
                    image:
                      description: Image is a container image with Go SDK and auto-instrumentation.
                      type: string
                    language:
                      description: Language is the language that will be instrumented.
                      type: string
                    resourceRequirements:
                      description: Resources describes the compute resource requirements.
                      properties:
                        claims:
                          description: |-
                            Claims lists the names of resources, defined in spec.resourceClaims,
                            that are used by this container.

                            This is an alpha field and requires enabling the
                            DynamicResourceAllocation feature gate.

                            This field is immutable. It can only be set for containers.
                          items:
                            description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                            properties:
                              name:
                                description: |-
                                  Name must match the name of one entry in pod.spec.resourceClaims of
                                  the Pod where this field is used. It makes that resource available
                                  inside a container.
                                type: string
                              request:
                                description: |-
                                  Request is the name chosen for a request in the referenced claim.
                                  If empty, everything from the claim is made available, otherwise
                                  only the result of this request.
                                type: string
                            required:
                              - name
                            type: object
                          type: array
                          x-kubernetes-list-map-keys:
                            - name
                          x-kubernetes-list-type: map
                        limits:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Limits describes the maximum amount of compute resources allowed.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Requests describes the minimum amount of compute resources required.
                            If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                            otherwise to an implementation-defined value. Requests cannot exceed Limits.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                      type: object
                    volumeLimitSize:
                      anyOf:
                        - type: integer
                        - type: string
                      description: |-
                        VolumeSizeLimit defines size limit for volume used for auto-instrumentation.
                        The default size is 200Mi.
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                  type: object
                agentConfigMap:
                  description: |-
                    AgentConfigMap defines where to take the agent configuration from.
                    it should be present in the operator namespace.
                  type: string
                exporter:
                  description: Exporter defines exporter configuration.
                  properties:
                    endpoint:
                      description: Endpoint is address of the collector with OTLP endpoint.
                      type: string
                  type: object
                healthAgent:
                  description: HealthAgent defines configuration for healthAgent instrumentation.
                  properties:
                    env:
                      description: |-
                        Env defines Go specific env vars. There are four layers for env vars' definitions and
                        the precedence order is: `original container env vars` > `language specific env vars` > `common env vars` > `instrument spec configs' vars`.
                        If the former var had been defined, then the other vars would be ignored.
                      items:
                        description: EnvVar represents an environment variable present
                          in a Container.
                        properties:
                          name:
                            description: Name of the environment variable. Must be a
                              C_IDENTIFIER.
                            type: string
                          value:
                            description: |-
                              Variable references $(VAR_NAME) are expanded
                              using the previously defined environment variables in the container and
                              any service environment variables. If a variable cannot be resolved,
                              the reference in the input string will be unchanged. Double $$ are reduced
                              to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                              "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                              Escaped references will never be expanded, regardless of whether the variable
                              exists or not.
                              Defaults to "".
                            type: string
                          valueFrom:
                            description: Source for the environment variable's value.
                              Cannot be used if value is not empty.
                            properties:
                              configMapKeyRef:
                                description: Selects a key of a ConfigMap.
                                properties:
                                  key:
                                    description: The key to select.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the ConfigMap or its
                                      key must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                              fieldRef:
                                description: |-
                                  Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                  spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                properties:
                                  apiVersion:
                                    description: Version of the schema the FieldPath
                                      is written in terms of, defaults to "v1".
                                    type: string
                                  fieldPath:
                                    description: Path of the field to select in the
                                      specified API version.
                                    type: string
                                required:
                                  - fieldPath
                                type: object
                                x-kubernetes-map-type: atomic
                              resourceFieldRef:
                                description: |-
                                  Selects a resource of the container: only resources limits and requests
                                  (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                properties:
                                  containerName:
                                    description: 'Container name: required for volumes,
                                    optional for env vars'
                                    type: string
                                  divisor:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    description: Specifies the output format of the
                                      exposed resources, defaults to "1"
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  resource:
                                    description: 'Required: resource to select'
                                    type: string
                                required:
                                  - resource
                                type: object
                                x-kubernetes-map-type: atomic
                              secretKeyRef:
                                description: Selects a key of a secret in the pod's
                                  namespace
                                properties:
                                  key:
                                    description: The key of the secret to select from.  Must
                                      be a valid secret key.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the Secret or its key
                                      must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                        required:
                          - name
                        type: object
                      type: array
                    image:
                      description: Image is a container image with Go SDK and auto-instrumentation.
                      type: string
                  type: object
                licenseKeySecret:
                  description: |-
                    LicenseKeySecret defines where to take the licenseKeySecret from.
                    it should be present in the operator namespace.
                  type: string
                namespaceLabelSelector:
                  description: PodLabelSelector defines to which pods the config should
                    be applied.
                  properties:
                    matchExpressions:
                      description: matchExpressions is a list of label selector requirements.
                        The requirements are ANDed.
                      items:
                        description: |-
                          A label selector requirement is a selector that contains values, a key, and an operator that
                          relates the key and values.
                        properties:
                          key:
                            description: key is the label key that the selector applies
                              to.
                            type: string
                          operator:
                            description: |-
                              operator represents a key's relationship to a set of values.
                              Valid operators are In, NotIn, Exists and DoesNotExist.
                            type: string
                          values:
                            description: |-
                              values is an array of string values. If the operator is In or NotIn,
                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                              the values array must be empty. This array is replaced during a strategic
                              merge patch.
                            items:
                              type: string
                            type: array
                            x-kubernetes-list-type: atomic
                        required:
                          - key
                          - operator
                        type: object
                      type: array
                      x-kubernetes-list-type: atomic
                    matchLabels:
                      additionalProperties:
                        type: string
                      description: |-
                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                      type: object
                  type: object
                  x-kubernetes-map-type: atomic
                podLabelSelector:
                  description: PodLabelSelector defines to which pods the config should
                    be applied.
                  properties:
                    matchExpressions:
                      description: matchExpressions is a list of label selector requirements.
                        The requirements are ANDed.
                      items:
                        description: |-
                          A label selector requirement is a selector that contains values, a key, and an operator that
                          relates the key and values.
                        properties:
                          key:
                            description: key is the label key that the selector applies
                              to.
                            type: string
                          operator:
                            description: |-
                              operator represents a key's relationship to a set of values.
                              Valid operators are In, NotIn, Exists and DoesNotExist.
                            type: string
                          values:
                            description: |-
                              values is an array of string values. If the operator is In or NotIn,
                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                              the values array must be empty. This array is replaced during a strategic
                              merge patch.
                            items:
                              type: string
                            type: array
                            x-kubernetes-list-type: atomic
                        required:
                          - key
                          - operator
                        type: object
                      type: array
                      x-kubernetes-list-type: atomic
                    matchLabels:
                      additionalProperties:
                        type: string
                      description: |-
                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                      type: object
                  type: object
                  x-kubernetes-map-type: atomic
                propagators:
                  description: |-
                    Propagators defines inter-process context propagation configuration.
                    Values in this list will be set in the OTEL_PROPAGATORS env var.
                    Enum=tracecontext;none
                  items:
                    description: Propagator represents the propagation type.
                    enum:
                      - tracecontext
                      - none
                    type: string
                  type: array
                resource:
                  description: Resource defines the configuration for the resource attributes,
                    as defined by the OpenTelemetry specification.
                  properties:
                    addK8sUIDAttributes:
                      description: AddK8sUIDAttributes defines whether K8s UID attributes
                        should be collected (e.g. k8s.deployment.uid).
                      type: boolean
                    resourceAttributes:
                      additionalProperties:
                        type: string
                      description: |-
                        Attributes defines attributes that are added to the resource.
                        For example environment: dev
                      type: object
                  type: object
                sampler:
                  description: Sampler defines sampling configuration.
                  properties:
                    argument:
                      description: |-
                        Argument defines sampler argument.
                        The value depends on the sampler type.
                        For instance for parentbased_traceidratio sampler type it is a number in range [0..1] e.g. 0.25.
                        The value will be set in the OTEL_TRACES_SAMPLER_ARG env var.
                      type: string
                    type:
                      description: |-
                        Type defines sampler type.
                        The value will be set in the OTEL_TRACES_SAMPLER env var.
                        The value can be for instance parentbased_always_on, parentbased_always_off, parentbased_traceidratio...
                      enum:
                        - always_on
                        - always_off
                        - traceidratio
                        - parentbased_always_on
                        - parentbased_always_off
                        - parentbased_traceidratio
                      type: string
                  type: object
              type: object
            status:
              description: InstrumentationStatus defines the observed state of Instrumentation
              properties:
                lastUpdated:
                  format: date-time
                  type: string
                podsHealthy:
                  format: int64
                  type: integer
                podsInjected:
                  format: int64
                  type: integer
                podsMatching:
                  format: int64
                  type: integer
                podsNotReady:
                  format: int64
                  type: integer
                podsOutdated:
                  format: int64
                  type: integer
                podsUnhealthy:
                  format: int64
                  type: integer
                unhealthyPodsErrors:
                  items:
                    properties:
                      lastError:
                        type: string
                      pod:
                        type: string
                    type: object
                  type: array
              type: object
          type: object
      served: true
      storage: false
      subresources:
        status: {}
    - additionalPrinterColumns:
        - jsonPath: .metadata.creationTimestamp
          name: Age
          type: date
        - jsonPath: .status.podsMatching
          name: PodsMatching
          type: integer
        - jsonPath: .status.podsInjected
          name: PodsInjected
          type: integer
        - jsonPath: .status.podsNotReady
          name: PodsNotReady
          type: integer
        - jsonPath: .status.podsOutdated
          name: PodsOutdated
          type: integer
        - jsonPath: .status.podsHealthy
          name: PodsHealthy
          type: integer
        - jsonPath: .status.podsUnhealthy
          name: PodsUnhealthy
          type: integer
      name: v1beta2
      schema:
        openAPIV3Schema:
          description: Instrumentation is the Schema for the instrumentations API
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: InstrumentationSpec defines the desired state of Instrumentation
              properties:
                agent:
                  description: Agent defines configuration for agent instrumentation.
                  properties:
                    env:
                      description: |-
                        Env defines Go specific env vars. There are four layers for env vars' definitions and
                        the precedence order is: `original container env vars` > `language specific env vars` > `common env vars` > `instrument spec configs' vars`.
                        If the former var had been defined, then the other vars would be ignored.
                      items:
                        description: EnvVar represents an environment variable present
                          in a Container.
                        properties:
                          name:
                            description: Name of the environment variable. Must be a
                              C_IDENTIFIER.
                            type: string
                          value:
                            description: |-
                              Variable references $(VAR_NAME) are expanded
                              using the previously defined environment variables in the container and
                              any service environment variables. If a variable cannot be resolved,
                              the reference in the input string will be unchanged. Double $$ are reduced
                              to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                              "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                              Escaped references will never be expanded, regardless of whether the variable
                              exists or not.
                              Defaults to "".
                            type: string
                          valueFrom:
                            description: Source for the environment variable's value.
                              Cannot be used if value is not empty.
                            properties:
                              configMapKeyRef:
                                description: Selects a key of a ConfigMap.
                                properties:
                                  key:
                                    description: The key to select.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the ConfigMap or its
                                      key must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                              fieldRef:
                                description: |-
                                  Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                  spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                properties:
                                  apiVersion:
                                    description: Version of the schema the FieldPath
                                      is written in terms of, defaults to "v1".
                                    type: string
                                  fieldPath:
                                    description: Path of the field to select in the
                                      specified API version.
                                    type: string
                                required:
                                  - fieldPath
                                type: object
                                x-kubernetes-map-type: atomic
                              resourceFieldRef:
                                description: |-
                                  Selects a resource of the container: only resources limits and requests
                                  (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                properties:
                                  containerName:
                                    description: 'Container name: required for volumes,
                                    optional for env vars'
                                    type: string
                                  divisor:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    description: Specifies the output format of the
                                      exposed resources, defaults to "1"
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  resource:
                                    description: 'Required: resource to select'
                                    type: string
                                required:
                                  - resource
                                type: object
                                x-kubernetes-map-type: atomic
                              secretKeyRef:
                                description: Selects a key of a secret in the pod's
                                  namespace
                                properties:
                                  key:
                                    description: The key of the secret to select from.  Must
                                      be a valid secret key.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the Secret or its key
                                      must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                        required:
                          - name
                        type: object
                      type: array
                    image:
                      description: Image is a container image with Go SDK and auto-instrumentation.
                      type: string
                    imagePullPolicy:
                      description: |-
                        Image pull policy.
                        One of Always, Never, IfNotPresent.
                        Defaults to Always if :latest tag is specified, or IfNotPresent otherwise.
                        Cannot be updated.
                        More info: https://kubernetes.io/docs/concepts/containers/images#updating-images
                      type: string
                    language:
                      description: Language is the language that will be instrumented.
                      type: string
                    resourceRequirements:
                      description: Resources describes the compute resource requirements.
                      properties:
                        claims:
                          description: |-
                            Claims lists the names of resources, defined in spec.resourceClaims,
                            that are used by this container.

                            This is an alpha field and requires enabling the
                            DynamicResourceAllocation feature gate.

                            This field is immutable. It can only be set for containers.
                          items:
                            description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                            properties:
                              name:
                                description: |-
                                  Name must match the name of one entry in pod.spec.resourceClaims of
                                  the Pod where this field is used. It makes that resource available
                                  inside a container.
                                type: string
                              request:
                                description: |-
                                  Request is the name chosen for a request in the referenced claim.
                                  If empty, everything from the claim is made available, otherwise
                                  only the result of this request.
                                type: string
                            required:
                              - name
                            type: object
                          type: array
                          x-kubernetes-list-map-keys:
                            - name
                          x-kubernetes-list-type: map
                        limits:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Limits describes the maximum amount of compute resources allowed.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Requests describes the minimum amount of compute resources required.
                            If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                            otherwise to an implementation-defined value. Requests cannot exceed Limits.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                      type: object
                    securityContext:
                      description: |-
                        SecurityContext defines the security options the container should be run with.
                        If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext.
                        More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
                      properties:
                        allowPrivilegeEscalation:
                          description: |-
                            AllowPrivilegeEscalation controls whether a process can gain more
                            privileges than its parent process. This bool directly controls if
                            the no_new_privs flag will be set on the container process.
                            AllowPrivilegeEscalation is true always when the container is:
                            1) run as Privileged
                            2) has CAP_SYS_ADMIN
                            Note that this field cannot be set when spec.os.name is windows.
                          type: boolean
                        appArmorProfile:
                          description: |-
                            appArmorProfile is the AppArmor options to use by this container. If set, this profile
                            overrides the pod's appArmorProfile.
                            Note that this field cannot be set when spec.os.name is windows.
                          properties:
                            localhostProfile:
                              description: |-
                                localhostProfile indicates a profile loaded on the node that should be used.
                                The profile must be preconfigured on the node to work.
                                Must match the loaded name of the profile.
                                Must be set if and only if type is "Localhost".
                              type: string
                            type:
                              description: |-
                                type indicates which kind of AppArmor profile will be applied.
                                Valid options are:
                                  Localhost - a profile pre-loaded on the node.
                                  RuntimeDefault - the container runtime's default profile.
                                  Unconfined - no AppArmor enforcement.
                              type: string
                          required:
                            - type
                          type: object
                        capabilities:
                          description: |-
                            The capabilities to add/drop when running containers.
                            Defaults to the default set of capabilities granted by the container runtime.
                            Note that this field cannot be set when spec.os.name is windows.
                          properties:
                            add:
                              description: Added capabilities
                              items:
                                description: Capability represent POSIX capabilities
                                  type
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                            drop:
                              description: Removed capabilities
                              items:
                                description: Capability represent POSIX capabilities
                                  type
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                          type: object
                        privileged:
                          description: |-
                            Run container in privileged mode.
                            Processes in privileged containers are essentially equivalent to root on the host.
                            Defaults to false.
                            Note that this field cannot be set when spec.os.name is windows.
                          type: boolean
                        procMount:
                          description: |-
                            procMount denotes the type of proc mount to use for the containers.
                            The default value is Default which uses the container runtime defaults for
                            readonly paths and masked paths.
                            This requires the ProcMountType feature flag to be enabled.
                            Note that this field cannot be set when spec.os.name is windows.
                          type: string
                        readOnlyRootFilesystem:
                          description: |-
                            Whether this container has a read-only root filesystem.
                            Default is false.
                            Note that this field cannot be set when spec.os.name is windows.
                          type: boolean
                        runAsGroup:
                          description: |-
                            The GID to run the entrypoint of the container process.
                            Uses runtime default if unset.
                            May also be set in PodSecurityContext.  If set in both SecurityContext and
                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                            Note that this field cannot be set when spec.os.name is windows.
                          format: int64
                          type: integer
                        runAsNonRoot:
                          description: |-
                            Indicates that the container must run as a non-root user.
                            If true, the Kubelet will validate the image at runtime to ensure that it
                            does not run as UID 0 (root) and fail to start the container if it does.
                            If unset or false, no such validation will be performed.
                            May also be set in PodSecurityContext.  If set in both SecurityContext and
                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                          type: boolean
                        runAsUser:
                          description: |-
                            The UID to run the entrypoint of the container process.
                            Defaults to user specified in image metadata if unspecified.
                            May also be set in PodSecurityContext.  If set in both SecurityContext and
                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                            Note that this field cannot be set when spec.os.name is windows.
                          format: int64
                          type: integer
                        seLinuxOptions:
                          description: |-
                            The SELinux context to be applied to the container.
                            If unspecified, the container runtime will allocate a random SELinux context for each
                            container.  May also be set in PodSecurityContext.  If set in both SecurityContext and
                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                            Note that this field cannot be set when spec.os.name is windows.
                          properties:
                            level:
                              description: Level is SELinux level label that applies
                                to the container.
                              type: string
                            role:
                              description: Role is a SELinux role label that applies
                                to the container.
                              type: string
                            type:
                              description: Type is a SELinux type label that applies
                                to the container.
                              type: string
                            user:
                              description: User is a SELinux user label that applies
                                to the container.
                              type: string
                          type: object
                        seccompProfile:
                          description: |-
                            The seccomp options to use by this container. If seccomp options are
                            provided at both the pod & container level, the container options
                            override the pod options.
                            Note that this field cannot be set when spec.os.name is windows.
                          properties:
                            localhostProfile:
                              description: |-
                                localhostProfile indicates a profile defined in a file on the node should be used.
                                The profile must be preconfigured on the node to work.
                                Must be a descending path, relative to the kubelet's configured seccomp profile location.
                                Must be set if type is "Localhost". Must NOT be set for any other type.
                              type: string
                            type:
                              description: |-
                                type indicates which kind of seccomp profile will be applied.
                                Valid options are:

                                Localhost - a profile defined in a file on the node should be used.
                                RuntimeDefault - the container runtime default profile should be used.
                                Unconfined - no profile should be applied.
                              type: string
                          required:
                            - type
                          type: object
                        windowsOptions:
                          description: |-
                            The Windows specific settings applied to all containers.
                            If unspecified, the options from the PodSecurityContext will be used.
                            If set in both SecurityContext and PodSecurityContext, the value specified in SecurityContext takes precedence.
                            Note that this field cannot be set when spec.os.name is linux.
                          properties:
                            gmsaCredentialSpec:
                              description: |-
                                GMSACredentialSpec is where the GMSA admission webhook
                                (https://github.com/kubernetes-sigs/windows-gmsa) inlines the contents of the
                                GMSA credential spec named by the GMSACredentialSpecName field.
                              type: string
                            gmsaCredentialSpecName:
                              description: GMSACredentialSpecName is the name of the
                                GMSA credential spec to use.
                              type: string
                            hostProcess:
                              description: |-
                                HostProcess determines if a container should be run as a 'Host Process' container.
                                All of a Pod's containers must have the same effective HostProcess value
                                (it is not allowed to have a mix of HostProcess containers and non-HostProcess containers).
                                In addition, if HostProcess is true then HostNetwork must also be set to true.
                              type: boolean
                            runAsUserName:
                              description: |-
                                The UserName in Windows to run the entrypoint of the container process.
                                Defaults to the user specified in image metadata if unspecified.
                                May also be set in PodSecurityContext. If set in both SecurityContext and
                                PodSecurityContext, the value specified in SecurityContext takes precedence.
                              type: string
                          type: object
                      type: object
                    volumeLimitSize:
                      anyOf:
                        - type: integer
                        - type: string
                      description: |-
                        VolumeSizeLimit defines size limit for volume used for auto-instrumentation.
                        The default size is 200Mi.
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                  type: object
                agentConfigMap:
                  description: |-
                    AgentConfigMap defines where to take the agent configuration from.
                    it should be present in the operator namespace.
                  type: string
                containerSelector:
                  description: ContainerSelector defines to which pods the config should
                    be applied.
                  properties:
                    envSelector:
                      properties:
                        matchEnvs:
                          additionalProperties:
                            type: string
                          description: |-
                            matchEnvs is a map of {key,value} pairs. A single {key,value} in the matchEnvs
                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                          type: object
                        matchExpressions:
                          description: matchExpressions is a list of env selector requirements.
                            The requirements are ANDed.
                          items:
                            properties:
                              key:
                                description: key is the field selector key that the
                                  requirement applies to.
                                type: string
                              operator:
                                description: |-
                                  operator represents a key's relationship to a set of values.
                                  Valid operators are In, NotIn, Exists, DoesNotExist.
                                  The list of operators may grow in the future.
                                type: string
                              values:
                                description: |-
                                  values is an array of string values.
                                  If the operator is In or NotIn, the values array must be non-empty.
                                  If the operator is Exists or DoesNotExist, the values array must be empty.
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            required:
                              - key
                              - operator
                            type: object
                          type: array
                          x-kubernetes-list-type: atomic
                      type: object
                    imageSelector:
                      properties:
                        matchExpressions:
                          description: matchExpressions is a list of env selector requirements.
                            The requirements are ANDed.
                          items:
                            properties:
                              key:
                                description: key is the field selector key that the
                                  requirement applies to.
                                type: string
                              operator:
                                description: |-
                                  operator represents a key's relationship to a set of values.
                                  Valid operators are In, NotIn, Exists, DoesNotExist.
                                  The list of operators may grow in the future.
                                type: string
                              values:
                                description: |-
                                  values is an array of string values.
                                  If the operator is In or NotIn, the values array must be non-empty.
                                  If the operator is Exists or DoesNotExist, the values array must be empty.
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            required:
                              - key
                              - operator
                            type: object
                          type: array
                          x-kubernetes-list-type: atomic
                        matchImages:
                          additionalProperties:
                            type: string
                          description: |-
                            matchImages is a map of {key,value} pairs. A single {key,value} in the matchImages
                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                          type: object
                      type: object
                    nameSelector:
                      properties:
                        matchExpressions:
                          description: matchExpressions is a list of env selector requirements.
                            The requirements are ANDed.
                          items:
                            properties:
                              key:
                                description: key is the field selector key that the
                                  requirement applies to.
                                type: string
                              operator:
                                description: |-
                                  operator represents a key's relationship to a set of values.
                                  Valid operators are In, NotIn, Exists, DoesNotExist.
                                  The list of operators may grow in the future.
                                type: string
                              values:
                                description: |-
                                  values is an array of string values.
                                  If the operator is In or NotIn, the values array must be non-empty.
                                  If the operator is Exists or DoesNotExist, the values array must be empty.
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            required:
                              - key
                              - operator
                            type: object
                          type: array
                          x-kubernetes-list-type: atomic
                        matchNames:
                          additionalProperties:
                            type: string
                          description: |-
                            matchNames is a map of {key,value} pairs. A single {key,value} in the matchEnvs
                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                          type: object
                      type: object
                    namesFromPodAnnotation:
                      type: string
                    namesFromPodLabel:
                      type: string
                  required:
                    - envSelector
                  type: object
                healthAgent:
                  description: HealthAgent defines configuration for healthAgent instrumentation.
                  properties:
                    env:
                      description: |-
                        Env defines Go specific env vars. There are four layers for env vars' definitions and
                        the precedence order is: `original container env vars` > `language specific env vars` > `common env vars` > `instrument spec configs' vars`.
                        If the former var had been defined, then the other vars would be ignored.
                      items:
                        description: EnvVar represents an environment variable present
                          in a Container.
                        properties:
                          name:
                            description: Name of the environment variable. Must be a
                              C_IDENTIFIER.
                            type: string
                          value:
                            description: |-
                              Variable references $(VAR_NAME) are expanded
                              using the previously defined environment variables in the container and
                              any service environment variables. If a variable cannot be resolved,
                              the reference in the input string will be unchanged. Double $$ are reduced
                              to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                              "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                              Escaped references will never be expanded, regardless of whether the variable
                              exists or not.
                              Defaults to "".
                            type: string
                          valueFrom:
                            description: Source for the environment variable's value.
                              Cannot be used if value is not empty.
                            properties:
                              configMapKeyRef:
                                description: Selects a key of a ConfigMap.
                                properties:
                                  key:
                                    description: The key to select.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the ConfigMap or its
                                      key must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                              fieldRef:
                                description: |-
                                  Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                  spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                properties:
                                  apiVersion:
                                    description: Version of the schema the FieldPath
                                      is written in terms of, defaults to "v1".
                                    type: string
                                  fieldPath:
                                    description: Path of the field to select in the
                                      specified API version.
                                    type: string
                                required:
                                  - fieldPath
                                type: object
                                x-kubernetes-map-type: atomic
                              resourceFieldRef:
                                description: |-
                                  Selects a resource of the container: only resources limits and requests
                                  (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                properties:
                                  containerName:
                                    description: 'Container name: required for volumes,
                                    optional for env vars'
                                    type: string
                                  divisor:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    description: Specifies the output format of the
                                      exposed resources, defaults to "1"
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  resource:
                                    description: 'Required: resource to select'
                                    type: string
                                required:
                                  - resource
                                type: object
                                x-kubernetes-map-type: atomic
                              secretKeyRef:
                                description: Selects a key of a secret in the pod's
                                  namespace
                                properties:
                                  key:
                                    description: The key of the secret to select from.  Must
                                      be a valid secret key.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                  optional:
                                    description: Specify whether the Secret or its key
                                      must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                        required:
                          - name
                        type: object
                      type: array
                    image:
                      description: Image is a container image with Go SDK and auto-instrumentation.
                      type: string
                    imagePullPolicy:
                      description: |-
                        Image pull policy.
                        One of Always, Never, IfNotPresent.
                        Defaults to Always if :latest tag is specified, or IfNotPresent otherwise.
                        Cannot be updated.
                        More info: https://kubernetes.io/docs/concepts/containers/images#updating-images
                      type: string
                    resourceRequirements:
                      description: Resources describes the compute resource requirements.
                      properties:
                        claims:
                          description: |-
                            Claims lists the names of resources, defined in spec.resourceClaims,
                            that are used by this container.

                            This is an alpha field and requires enabling the
                            DynamicResourceAllocation feature gate.

                            This field is immutable. It can only be set for containers.
                          items:
                            description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                            properties:
                              name:
                                description: |-
                                  Name must match the name of one entry in pod.spec.resourceClaims of
                                  the Pod where this field is used. It makes that resource available
                                  inside a container.
                                type: string
                              request:
                                description: |-
                                  Request is the name chosen for a request in the referenced claim.
                                  If empty, everything from the claim is made available, otherwise
                                  only the result of this request.
                                type: string
                            required:
                              - name
                            type: object
                          type: array
                          x-kubernetes-list-map-keys:
                            - name
                          x-kubernetes-list-type: map
                        limits:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Limits describes the maximum amount of compute resources allowed.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Requests describes the minimum amount of compute resources required.
                            If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                            otherwise to an implementation-defined value. Requests cannot exceed Limits.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                      type: object
                    securityContext:
                      description: |-
                        SecurityContext defines the security options the container should be run with.
                        If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext.
                        More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
                      properties:
                        allowPrivilegeEscalation:
                          description: |-
                            AllowPrivilegeEscalation controls whether a process can gain more
                            privileges than its parent process. This bool directly controls if
                            the no_new_privs flag will be set on the container process.
                            AllowPrivilegeEscalation is true always when the container is:
                            1) run as Privileged
                            2) has CAP_SYS_ADMIN
                            Note that this field cannot be set when spec.os.name is windows.
                          type: boolean
                        appArmorProfile:
                          description: |-
                            appArmorProfile is the AppArmor options to use by this container. If set, this profile
                            overrides the pod's appArmorProfile.
                            Note that this field cannot be set when spec.os.name is windows.
                          properties:
                            localhostProfile:
                              description: |-
                                localhostProfile indicates a profile loaded on the node that should be used.
                                The profile must be preconfigured on the node to work.
                                Must match the loaded name of the profile.
                                Must be set if and only if type is "Localhost".
                              type: string
                            type:
                              description: |-
                                type indicates which kind of AppArmor profile will be applied.
                                Valid options are:
                                  Localhost - a profile pre-loaded on the node.
                                  RuntimeDefault - the container runtime's default profile.
                                  Unconfined - no AppArmor enforcement.
                              type: string
                          required:
                            - type
                          type: object
                        capabilities:
                          description: |-
                            The capabilities to add/drop when running containers.
                            Defaults to the default set of capabilities granted by the container runtime.
                            Note that this field cannot be set when spec.os.name is windows.
                          properties:
                            add:
                              description: Added capabilities
                              items:
                                description: Capability represent POSIX capabilities
                                  type
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                            drop:
                              description: Removed capabilities
                              items:
                                description: Capability represent POSIX capabilities
                                  type
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                          type: object
                        privileged:
                          description: |-
                            Run container in privileged mode.
                            Processes in privileged containers are essentially equivalent to root on the host.
                            Defaults to false.
                            Note that this field cannot be set when spec.os.name is windows.
                          type: boolean
                        procMount:
                          description: |-
                            procMount denotes the type of proc mount to use for the containers.
                            The default value is Default which uses the container runtime defaults for
                            readonly paths and masked paths.
                            This requires the ProcMountType feature flag to be enabled.
                            Note that this field cannot be set when spec.os.name is windows.
                          type: string
                        readOnlyRootFilesystem:
                          description: |-
                            Whether this container has a read-only root filesystem.
                            Default is false.
                            Note that this field cannot be set when spec.os.name is windows.
                          type: boolean
                        runAsGroup:
                          description: |-
                            The GID to run the entrypoint of the container process.
                            Uses runtime default if unset.
                            May also be set in PodSecurityContext.  If set in both SecurityContext and
                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                            Note that this field cannot be set when spec.os.name is windows.
                          format: int64
                          type: integer
                        runAsNonRoot:
                          description: |-
                            Indicates that the container must run as a non-root user.
                            If true, the Kubelet will validate the image at runtime to ensure that it
                            does not run as UID 0 (root) and fail to start the container if it does.
                            If unset or false, no such validation will be performed.
                            May also be set in PodSecurityContext.  If set in both SecurityContext and
                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                          type: boolean
                        runAsUser:
                          description: |-
                            The UID to run the entrypoint of the container process.
                            Defaults to user specified in image metadata if unspecified.
                            May also be set in PodSecurityContext.  If set in both SecurityContext and
                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                            Note that this field cannot be set when spec.os.name is windows.
                          format: int64
                          type: integer
                        seLinuxOptions:
                          description: |-
                            The SELinux context to be applied to the container.
                            If unspecified, the container runtime will allocate a random SELinux context for each
                            container.  May also be set in PodSecurityContext.  If set in both SecurityContext and
                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                            Note that this field cannot be set when spec.os.name is windows.
                          properties:
                            level:
                              description: Level is SELinux level label that applies
                                to the container.
                              type: string
                            role:
                              description: Role is a SELinux role label that applies
                                to the container.
                              type: string
                            type:
                              description: Type is a SELinux type label that applies
                                to the container.
                              type: string
                            user:
                              description: User is a SELinux user label that applies
                                to the container.
                              type: string
                          type: object
                        seccompProfile:
                          description: |-
                            The seccomp options to use by this container. If seccomp options are
                            provided at both the pod & container level, the container options
                            override the pod options.
                            Note that this field cannot be set when spec.os.name is windows.
                          properties:
                            localhostProfile:
                              description: |-
                                localhostProfile indicates a profile defined in a file on the node should be used.
                                The profile must be preconfigured on the node to work.
                                Must be a descending path, relative to the kubelet's configured seccomp profile location.
                                Must be set if type is "Localhost". Must NOT be set for any other type.
                              type: string
                            type:
                              description: |-
                                type indicates which kind of seccomp profile will be applied.
                                Valid options are:

                                Localhost - a profile defined in a file on the node should be used.
                                RuntimeDefault - the container runtime default profile should be used.
                                Unconfined - no profile should be applied.
                              type: string
                          required:
                            - type
                          type: object
                        windowsOptions:
                          description: |-
                            The Windows specific settings applied to all containers.
                            If unspecified, the options from the PodSecurityContext will be used.
                            If set in both SecurityContext and PodSecurityContext, the value specified in SecurityContext takes precedence.
                            Note that this field cannot be set when spec.os.name is linux.
                          properties:
                            gmsaCredentialSpec:
                              description: |-
                                GMSACredentialSpec is where the GMSA admission webhook
                                (https://github.com/kubernetes-sigs/windows-gmsa) inlines the contents of the
                                GMSA credential spec named by the GMSACredentialSpecName field.
                              type: string
                            gmsaCredentialSpecName:
                              description: GMSACredentialSpecName is the name of the
                                GMSA credential spec to use.
                              type: string
                            hostProcess:
                              description: |-
                                HostProcess determines if a container should be run as a 'Host Process' container.
                                All of a Pod's containers must have the same effective HostProcess value
                                (it is not allowed to have a mix of HostProcess containers and non-HostProcess containers).
                                In addition, if HostProcess is true then HostNetwork must also be set to true.
                              type: boolean
                            runAsUserName:
                              description: |-
                                The UserName in Windows to run the entrypoint of the container process.
                                Defaults to the user specified in image metadata if unspecified.
                                May also be set in PodSecurityContext. If set in both SecurityContext and
                                PodSecurityContext, the value specified in SecurityContext takes precedence.
                              type: string
                          type: object
                      type: object
                  type: object
                licenseKeySecret:
                  description: |-
                    LicenseKeySecret defines where to take the licenseKeySecret from.
                    it should be present in the operator namespace.
                  type: string
                namespaceLabelSelector:
                  description: PodLabelSelector defines to which pods the config should
                    be applied.
                  properties:
                    matchExpressions:
                      description: matchExpressions is a list of label selector requirements.
                        The requirements are ANDed.
                      items:
                        description: |-
                          A label selector requirement is a selector that contains values, a key, and an operator that
                          relates the key and values.
                        properties:
                          key:
                            description: key is the label key that the selector applies
                              to.
                            type: string
                          operator:
                            description: |-
                              operator represents a key's relationship to a set of values.
                              Valid operators are In, NotIn, Exists and DoesNotExist.
                            type: string
                          values:
                            description: |-
                              values is an array of string values. If the operator is In or NotIn,
                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                              the values array must be empty. This array is replaced during a strategic
                              merge patch.
                            items:
                              type: string
                            type: array
                            x-kubernetes-list-type: atomic
                        required:
                          - key
                          - operator
                        type: object
                      type: array
                      x-kubernetes-list-type: atomic
                    matchLabels:
                      additionalProperties:
                        type: string
                      description: |-
                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                      type: object
                  type: object
                  x-kubernetes-map-type: atomic
                podLabelSelector:
                  description: PodLabelSelector defines to which pods the config should
                    be applied.
                  properties:
                    matchExpressions:
                      description: matchExpressions is a list of label selector requirements.
                        The requirements are ANDed.
                      items:
                        description: |-
                          A label selector requirement is a selector that contains values, a key, and an operator that
                          relates the key and values.
                        properties:
                          key:
                            description: key is the label key that the selector applies
                              to.
                            type: string
                          operator:
                            description: |-
                              operator represents a key's relationship to a set of values.
                              Valid operators are In, NotIn, Exists and DoesNotExist.
                            type: string
                          values:
                            description: |-
                              values is an array of string values. If the operator is In or NotIn,
                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                              the values array must be empty. This array is replaced during a strategic
                              merge patch.
                            items:
                              type: string
                            type: array
                            x-kubernetes-list-type: atomic
                        required:
                          - key
                          - operator
                        type: object
                      type: array
                      x-kubernetes-list-type: atomic
                    matchLabels:
                      additionalProperties:
                        type: string
                      description: |-
                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                      type: object
                  type: object
                  x-kubernetes-map-type: atomic
              type: object
            status:
              description: InstrumentationStatus defines the observed state of Instrumentation
              properties:
                lastUpdated:
                  format: date-time
                  type: string
                observedVersion:
                  type: string
                podsHealthy:
                  format: int64
                  type: integer
                podsInjected:
                  format: int64
                  type: integer
                podsMatching:
                  format: int64
                  type: integer
                podsNotReady:
                  format: int64
                  type: integer
                podsOutdated:
                  format: int64
                  type: integer
                podsUnhealthy:
                  format: int64
                  type: integer
                unhealthyPodsErrors:
                  items:
                    properties:
                      lastError:
                        type: string
                      pod:
                        type: string
                    type: object
                  type: array
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/instrumentation-editor-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-k8s-agents-operator-instrumentation-editor-role
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
rules:
- apiGroups:
  - newrelic.com
  resources:
  - instrumentations
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - newrelic.com
  resources:
  - instrumentations/status
  verbs:
  - get
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/instrumentation-viewer-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-k8s-agents-operator-instrumentation-viewer-role
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
rules:
- apiGroups:
  - newrelic.com
  resources:
  - instrumentations
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - newrelic.com
  resources:
  - instrumentations/status
  verbs:
  - get
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/manager-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-k8s-agents-operator-manager-role
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
rules:
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - ""
  resources:
  - namespaces
  - pods
  verbs:
    - get
    - list
    - watch
- apiGroups:
    - ""
  resources:
    - namespaces/status
    - pods/status
  verbs:
    - get
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - delete
  - deletecollection
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - apps
  resources:
  - replicasets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - newrelic.com
  resources:
  - instrumentations
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - newrelic.com
  resources:
  - instrumentations/finalizers
  verbs:
  - update
- apiGroups:
  - newrelic.com
  resources:
  - instrumentations/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - route.openshift.io
  resources:
  - routes
  - routes/custom-host
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/metrics-auth-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-k8s-agents-operator-metrics-auth-role
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
rules:
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/metrics-reader-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-k8s-agents-operator-metrics-reader
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
rules:
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
# Source: nri-bundle/charts/kube-state-metrics/templates/role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    helm.sh/chart: kube-state-metrics-5.30.1
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: metrics
    app.kubernetes.io/part-of: kube-state-metrics
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/version: "2.15.0"
  name: newrelic-bundle-kube-state-metrics
rules:

- apiGroups: ["certificates.k8s.io"]
  resources:
  - certificatesigningrequests
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - configmaps
  verbs: ["list", "watch"]

- apiGroups: ["batch"]
  resources:
  - cronjobs
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - daemonsets
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - deployments
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - endpoints
  verbs: ["list", "watch"]

- apiGroups: ["autoscaling"]
  resources:
  - horizontalpodautoscalers
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "networking.k8s.io"]
  resources:
  - ingresses
  verbs: ["list", "watch"]

- apiGroups: ["batch"]
  resources:
  - jobs
  verbs: ["list", "watch"]

- apiGroups: ["coordination.k8s.io"]
  resources:
  - leases
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - limitranges
  verbs: ["list", "watch"]

- apiGroups: ["admissionregistration.k8s.io"]
  resources:
    - mutatingwebhookconfigurations
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - namespaces
  verbs: ["list", "watch"]

- apiGroups: ["networking.k8s.io"]
  resources:
  - networkpolicies
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - nodes
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - persistentvolumeclaims
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - persistentvolumes
  verbs: ["list", "watch"]

- apiGroups: ["policy"]
  resources:
    - poddisruptionbudgets
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - pods
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - replicasets
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - replicationcontrollers
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - resourcequotas
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - secrets
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - services
  verbs: ["list", "watch"]

- apiGroups: ["apps"]
  resources:
  - statefulsets
  verbs: ["list", "watch"]

- apiGroups: ["storage.k8s.io"]
  resources:
    - storageclasses
  verbs: ["list", "watch"]

- apiGroups: ["admissionregistration.k8s.io"]
  resources:
    - validatingwebhookconfigurations
  verbs: ["list", "watch"]

- apiGroups: ["storage.k8s.io"]
  resources:
    - volumeattachments
  verbs: ["list", "watch"]
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-newrelic-infra-operator
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
rules:
  - apiGroups: [""]
    resources:
      - "secrets"
    verbs: ["get", "update", "patch"]
    resourceNames: [ "newrelic-bundle-newrelic-infra-operator-config" ]
  - apiGroups: [""]
    resources:
      - "secrets"
    verbs: ["create"]
  - apiGroups: ["rbac.authorization.k8s.io"]
    resources: ["clusterrolebindings"]
    verbs: ["list", "watch", "get"]
  - apiGroups: ["rbac.authorization.k8s.io"]
    resources: ["clusterrolebindings"]
    verbs: ["update"]
    resourceNames: [ "newrelic-bundle-newrelic-infra-operator-infra-agent" ]
  - apiGroups: [""]
    resources:
      - "nodes"
      - "nodes/metrics"
      - "nodes/stats"
      - "nodes/proxy"
      - "pods"
      - "services"
      - "namespaces"
    verbs: ["get", "list"]
  - nonResourceURLs: ["/metrics"]
    verbs: ["get"]
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-newrelic-infra-operator-infra-agent
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
rules:
  - apiGroups: [""]
    resources:
      - "nodes"
      - "nodes/metrics"
      - "nodes/stats"
      - "nodes/proxy"
      - "pods"
      - "services"
      - "namespaces"
    verbs: ["get", "list"]
  - nonResourceURLs: ["/metrics"]
    verbs: ["get"]
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-newrelic-infrastructure
rules:
  - apiGroups: [""]
    resources:
      - "nodes/metrics"
      - "nodes/stats"
      - "nodes/proxy"
    verbs: ["get", "list"]
  - apiGroups: [ "" ]
    resources:
      - "endpoints"
      - "services"
      - "nodes"
      - "namespaces"
      - "pods"
    verbs: [ "get", "list", "watch" ]
  - nonResourceURLs: ["/metrics"]
    verbs: ["get"]
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/controlplane/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-controlplane
rules:
  - apiGroups: [""]
    resources:
      - "nodes/metrics"
      - "nodes/stats"
      - "nodes/proxy"
    verbs: ["get", "list"]
  - apiGroups: [ "" ]
    resources:
      - "pods"
      - "nodes"
    verbs: [ "get", "list", "watch" ]
  - nonResourceURLs: ["/metrics"]
    verbs: ["get", "head"]
---
# Source: nri-bundle/charts/newrelic-logging/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: newrelic-logging
    chart: newrelic-logging-1.31.0
    heritage: Helm
    release: newrelic-bundle
    app.kubernetes.io/name: newrelic-logging
  name: newrelic-bundle-newrelic-logging
rules:
  - apiGroups: [""]
    resources:
      - namespaces
      - pods
    verbs: ["get", "list", "watch"]
---
# Source: nri-bundle/charts/newrelic-prometheus-agent/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-newrelic-prometheus-agent
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-prometheus-agent
    app.kubernetes.io/version: v3.7.0-rc.0
    helm.sh/chart: newrelic-prometheus-agent-2.4.1
rules:
  - apiGroups:
      - ""
    resources:
      - endpoints
      - services
      - pods
      - services
    verbs:
      - get
      - list
      - watch
  - nonResourceURLs:
      - "/metrics"
    verbs:
      - get
---
# Source: nri-bundle/charts/nri-kube-events/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-kube-events-3.16.1
  name: newrelic-bundle-nri-kube-events
rules:
- apiGroups:
  - ""
  resources:
  - events
  - namespaces
  - nodes
  - jobs
  - persistentvolumes
  - persistentvolumeclaims
  - pods
  - services
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - batch
  resources:
  - cronjobs
  - jobs
  verbs:
  - get
  - watch
  - list
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/manager-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: newrelic-bundle-k8s-agents-operator-manager-rolebinding
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-k8s-agents-operator-manager-role
subjects:
- kind: ServiceAccount
  name: newrelic-bundle-k8s-agents-operator
  namespace: newrelic
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/metrics-auth-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: newrelic-bundle-k8s-agents-operator-metrics-auth-rolebinding
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-k8s-agents-operator-metrics-auth-role
subjects:
- kind: ServiceAccount
  name: newrelic-bundle-k8s-agents-operator
  namespace: newrelic
---
# Source: nri-bundle/charts/kube-state-metrics/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    helm.sh/chart: kube-state-metrics-5.30.1
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: metrics
    app.kubernetes.io/part-of: kube-state-metrics
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/version: "2.15.0"
  name: newrelic-bundle-kube-state-metrics
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-kube-state-metrics
subjects:
- kind: ServiceAccount
  name: newrelic-bundle-kube-state-metrics
  namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: newrelic-bundle-newrelic-infra-operator
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-newrelic-infra-operator
subjects:
  - kind: ServiceAccount
    name: newrelic-bundle-newrelic-infra-operator
    namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: newrelic-bundle-newrelic-infra-operator-infra-agent
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-newrelic-infra-operator-infra-agent
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-newrelic-infrastructure
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-newrelic-infrastructure
subjects:
- kind: ServiceAccount
  name: newrelic-bundle-newrelic-infrastructure
  namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/controlplane/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
  name: newrelic-bundle-nrk8s-controlplane
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-nrk8s-controlplane
subjects:
  - kind: ServiceAccount
    name: newrelic-bundle-nrk8s-controlplane
    namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-logging/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: newrelic-logging
    chart: newrelic-logging-1.31.0
    heritage: Helm
    release: newrelic-bundle
    app.kubernetes.io/name: newrelic-logging
  name: newrelic-bundle-newrelic-logging
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-newrelic-logging
subjects:
- kind: ServiceAccount
  name: newrelic-bundle-newrelic-logging
  namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-prometheus-agent/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: newrelic-bundle-newrelic-prometheus-agent
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-prometheus-agent
    app.kubernetes.io/version: v3.7.0-rc.0
    helm.sh/chart: newrelic-prometheus-agent-2.4.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-newrelic-prometheus-agent
subjects:
- kind: ServiceAccount
  name: newrelic-bundle-newrelic-prometheus-agent
  namespace: newrelic
---
# Source: nri-bundle/charts/nri-kube-events/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-kube-events-3.16.1
  name: newrelic-bundle-nri-kube-events
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-nri-kube-events
subjects:
- kind: ServiceAccount
  name: newrelic-bundle-nri-kube-events
  namespace: newrelic
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/leader-election-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: newrelic-bundle-k8s-agents-operator-leader-election-role
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/leader-election-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: newrelic-bundle-k8s-agents-operator-leader-election-rolebinding
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: newrelic-bundle-k8s-agents-operator-leader-election-role
subjects:
- kind: ServiceAccount
  name: newrelic-bundle-k8s-agents-operator
  namespace: newrelic
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/metrics-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: newrelic-bundle-k8s-agents-o-controller-manager-metrics-service
  namespace: newrelic
  labels:
    control-plane: controller-manager
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
spec:
  type: ClusterIP
  selector:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/name: k8s-agents-operator
    control-plane: controller-manager
  ports:
  - name: https
    port: 8443
    protocol: TCP
    targetPort: 8443
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/webhook-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: newrelic-bundle-k8s-agents-operator-webhook-service
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
spec:
  type: ClusterIP
  selector:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/name: k8s-agents-operator
    control-plane: controller-manager
  ports:
  - port: 443
    protocol: TCP
    targetPort: 9443
---
# Source: nri-bundle/charts/kube-state-metrics/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: newrelic-bundle-kube-state-metrics
  namespace: newrelic
  labels:
    helm.sh/chart: kube-state-metrics-5.30.1
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: metrics
    app.kubernetes.io/part-of: kube-state-metrics
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/version: "2.15.0"
  annotations:
    prometheus.io/scrape: 'true'
spec:
  type: "ClusterIP"
  ports:
  - name: "http"
    protocol: TCP
    port: 8080
    targetPort: 8080

  selector:
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/instance: newrelic-bundle
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-infra-operator
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
spec:
  ports:
  - port: 443
    targetPort: 9443
  selector:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/name: newrelic-infra-operator
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: newrelic-bundle-nri-metadata-injection
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
spec:
  ports:
  - port: 443
    targetPort: 8443
  selector:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/name: nri-metadata-injection
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/kubelet/daemonset.yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
    mode: privileged
  name: newrelic-bundle-nrk8s-kubelet
spec:
  updateStrategy:
    rollingUpdate:
      maxUnavailable: 1
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: newrelic-bundle
      app.kubernetes.io/name: newrelic-infrastructure
      app.kubernetes.io/component: kubelet
  template:
    metadata:
      annotations:
        checksum/nri-kubernetes: bb03c918a2457c432454258e065a2be0679370f2b2312f70e412039a14ed4fbc
        checksum/agent-config: a26cd95995a58670c81e559e06be1539495190b0590e7b0eef46ed3c4e4ae7f8
        checksum/integrations_config: 3277ae690d62a484ab2d21f8b154618a0e1e8290a631c008506c09e7c581fcd2
      labels:
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/name: newrelic-infrastructure
        mode: privileged
        app.kubernetes.io/component: kubelet
    spec:
      serviceAccountName: newrelic-bundle-newrelic-infrastructure
      hostNetwork: false
      containers:
        - name: kubelet
          image: "newrelic/nri-kubernetes:3.49.0"
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsGroup: 2000
            runAsUser: 1000
          env:
            - name: "NRI_KUBERNETES_SINK_HTTP_PORT"
              value: "8003"
            - name: "NRI_KUBERNETES_CLUSTERNAME"
              value: kmullaney-gts-training-k8s-8
            - name: "NRI_KUBERNETES_VERBOSE"
              value: "false"

            - name: "NRI_KUBERNETES_TESTCONNECTIONENDPOINT"

              value: /healthz




            - name: "NRI_KUBERNETES_NODENAME"
              valueFrom:
                fieldRef:
                  apiVersion: "v1"
                  fieldPath: "spec.nodeName"
            # Required to connect to the kubelet
            - name: "NRI_KUBERNETES_NODEIP"
              valueFrom:
                fieldRef:
                  apiVersion: "v1"
                  fieldPath: "status.hostIP"
          volumeMounts:
            - name: nri-kubernetes-config
              mountPath: /etc/newrelic-infra/nri-kubernetes.yml
              subPath: nri-kubernetes.yml
          resources:
            limits:
              memory: 300M
            requests:
              cpu: 100m
              memory: 150M
        - name: agent
          image: "newrelic/infrastructure-bundle:3.3.5"
          args: [ "newrelic-infra" ]
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: true
            privileged: true
            readOnlyRootFilesystem: true
            runAsGroup: 0
            runAsUser: 0
          ports:
            - containerPort: 8003
          env:
            - name: NRIA_LICENSE_KEY
              valueFrom:
                secretKeyRef:
                  name: newrelic-secrets
                  key: newRelicLicenseKey

            - name: "NRIA_OVERRIDE_HOSTNAME_SHORT"
              valueFrom:
                fieldRef:
                  apiVersion: "v1"
                  fieldPath: "spec.nodeName"

            - name: "NRIA_OVERRIDE_HOSTNAME"
              valueFrom:
                fieldRef:
                  apiVersion: "v1"
                  fieldPath: "spec.nodeName"

            - name: "NRI_KUBERNETES_NODE_NAME"
              valueFrom:
                fieldRef:
                  apiVersion: "v1"
                  fieldPath: "spec.nodeName"
            - name: "NRIA_DISPLAY_NAME"
              value: "kmullaney-gts-training-k8s-8:$(NRI_KUBERNETES_NODE_NAME)"
            - name: "CLUSTER_NAME"
              value: kmullaney-gts-training-k8s-8
            - name: "NRIA_PASSTHROUGH_ENVIRONMENT"
              value: "CLUSTER_NAME"
            - name: "NRIA_HOST"
              valueFrom:
                fieldRef:
                  apiVersion: "v1"
                  fieldPath: "status.hostIP"
          volumeMounts:
            - name: config
              mountPath: /etc/newrelic-infra.yml
              subPath: newrelic-infra.yml
            - name: nri-integrations-cfg-volume
              mountPath: /etc/newrelic-infra/integrations.d/
            - name: dev
              mountPath: /dev
            - name: host-containerd-socket
              mountPath: /run/containerd/containerd.sock
            - name: host-docker-socket
              mountPath: /var/run/docker.sock
            - name: log
              mountPath: /var/log
            - name: host-volume
              mountPath: /host
              mountPropagation: HostToContainer
              readOnly: true
            - mountPath: /var/db/newrelic-infra/data
              name: agent-tmpfs-data
            - mountPath: /var/db/newrelic-infra/user_data
              name: agent-tmpfs-user-data
            - mountPath: /tmp
              name: agent-tmpfs-tmp
          resources:
            limits:
              memory: 300M
            requests:
              cpu: 100m
              memory: 150M
      volumes:
        - name: dev
          hostPath:
            path: /dev
        - name: host-containerd-socket
          hostPath:
            path: /run/containerd/containerd.sock
        - name: host-docker-socket
          hostPath:
            path: /var/run/docker.sock
        - name: log
          hostPath:
            path: /var/log
        - name: host-volume
          hostPath:
            path: /
        - name: agent-tmpfs-data
          emptyDir: {}
        - name: agent-tmpfs-user-data
          emptyDir: {}
        - name: agent-tmpfs-tmp
          emptyDir: {}
        - name: nri-kubernetes-config
          configMap:
            name: newrelic-bundle-nrk8s-kubelet
            items:
              - key: nri-kubernetes.yml
                path: nri-kubernetes.yml
        - name: config
          configMap:
            name: newrelic-bundle-nrk8s-agent-kubelet
            items:
              - key: newrelic-infra.yml
                path: newrelic-infra.yml
        - name: nri-integrations-cfg-volume
          configMap:
            name: newrelic-bundle-nrk8s-integrations-cfg
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: eks.amazonaws.com/compute-type
                    operator: NotIn
                    values:
                      - fargate
      tolerations:
        - effect: NoSchedule
          operator: Exists
        - effect: NoExecute
          operator: Exists
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: nri-bundle/charts/newrelic-logging/templates/daemonset.yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  namespace: newrelic
  labels:
    app: newrelic-logging
    chart: newrelic-logging-1.31.0
    heritage: Helm
    release: newrelic-bundle
    app.kubernetes.io/name: newrelic-logging
  name: newrelic-bundle-newrelic-logging
  annotations:
spec:
  updateStrategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app: newrelic-logging
      release: newrelic-bundle
  template:
    metadata:
      annotations:
        checksum/fluent-bit-config: 82a6ec4d3a202687f8e6ce4c71c24adfe0ff329453b5fa8033bf3330f256c3ff
      labels:
        app: newrelic-logging
        release: newrelic-bundle
        kubernetes.io/os: linux
        app.kubernetes.io/name: newrelic-logging
    spec:
      serviceAccountName: newrelic-bundle-newrelic-logging
      dnsPolicy: ClusterFirstWithHostNet
      terminationGracePeriodSeconds: 10
      initContainers:
      containers:
        - name: newrelic-logging
          image: "newrelic/newrelic-fluentbit-output:2.4.0"
          imagePullPolicy: "IfNotPresent"
          env:
            - name: ENDPOINT
              value: "https://log-api.newrelic.com/log/v1"
            - name: SOURCE
              value:  "kubernetes"
            - name: LICENSE_KEY
              valueFrom:
                secretKeyRef:
                  name: newrelic-secrets
                  key: newRelicLicenseKey
            - name: CLUSTER_NAME
              value: kmullaney-gts-training-k8s-8
            - name: LOG_LEVEL
              value: "info"
            - name: LOG_PARSER
              value: "cri,docker"
            # NODE_NAME needs to be defined before FB_DB, because FB_DB references NODE_NAME in its value when using persistentVolume
            - name: NODE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: spec.nodeName
            - name: FB_DB
              value: "/var/log/flb_kube.db"
            - name: PATH
              value: "/var/log/containers/*.log"
            - name: K8S_BUFFER_SIZE
              value: "32k"
            - name: K8S_LOGGING_EXCLUDE
              value: "false"
            - name: LOW_DATA_MODE
              value: "false"
            - name: RETRY_LIMIT
              value: "5"
            - name: HOSTNAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: SEND_OUTPUT_PLUGIN_METRICS
              value: "false"
            - name: METRICS_HOST
              value: "metric-api.newrelic.com"

            - name: FLUENTBIT_METRICS_TIER
              value: "basic"
            - name: DAEMONSET_NAME
              value: newrelic-bundle-newrelic-logging
            - name: NAMESPACE
              value: newrelic
          command:
            - /fluent-bit/bin/fluent-bit
            - -c
            - /fluent-bit/etc/fluent-bit.conf
            - -e
            - /fluent-bit/bin/out_newrelic.so
          volumeMounts:
            - name: fluent-bit-config
              mountPath: /fluent-bit/etc
            - name: logs
              # We mount /var by default because container logs could be on /var/log or /var/lib/docker/containers (symlinked to /var/log)
              mountPath: /var

            - name: lua-scripts
              mountPath: /fluent-bit/scripts
              readOnly: true
          resources:
            limits:
              cpu: 500m
              memory: 128Mi
            requests:
              cpu: 250m
              memory: 64Mi
          livenessProbe:
            httpGet:
              path: /api/v1/health
              port: 2020
            initialDelaySeconds: 10
            periodSeconds: 30
            timeoutSeconds: 5
            failureThreshold: 3
      volumes:
        - name: lua-scripts
          configMap:
            name: newrelic-bundle-newrelic-logging-lua
        - name: fluent-bit-config
          configMap:
            name: newrelic-bundle-newrelic-logging-fluent-bit-config
        - name: logs
          hostPath:
            path: /var
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: eks.amazonaws.com/compute-type
                    operator: NotIn
                    values:
                      - fargate
      nodeSelector:
      tolerations:
        - effect: NoSchedule
          operator: Exists
        - effect: NoExecute
          operator: Exists
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: newrelic-bundle-k8s-agents-operator
  namespace: newrelic
  labels:
    control-plane: controller-manager
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: newrelic-bundle
      app.kubernetes.io/name: k8s-agents-operator
      control-plane: controller-manager
  template:
    metadata:
      labels:
        control-plane: controller-manager
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/name: k8s-agents-operator
    spec:
      serviceAccountName: newrelic-bundle-k8s-agents-operator
      securityContext:
        runAsNonRoot: true
      terminationGracePeriodSeconds: 10
      containers:
      - name: manager
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
        args:
        - --metrics-bind-address=:8443
        - --leader-elect
        - --zap-log-level=info
        - --health-probe-bind-address=:8081
        - --webhook-service-bind-address=:9443
        command:
        - /bin/operator
        env:
        - name: OPERATOR_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: KUBERNETES_CLUSTER_DOMAIN
          value: "cluster.local"
        - name: ENABLE_WEBHOOKS
          value: "true"
        image: newrelic/k8s-agents-operator:0.32.2
        imagePullPolicy: Always
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8081
          initialDelaySeconds: 15
          periodSeconds: 20
        ports:
        - containerPort: 9443
          name: webhook-server
          protocol: TCP
        readinessProbe:
          httpGet:
            path: /readyz
            port: 8081
          initialDelaySeconds: 5
          periodSeconds: 10
        resources:
          limits:
            cpu: 500m
            memory: 192Mi
          requests:
            cpu: 100m
            memory: 64Mi
        volumeMounts:
        - mountPath: /tmp/k8s-webhook-server/serving-certs
          name: cert
          readOnly: true
      volumes:
      - name: cert
        secret:
          defaultMode: 420
          secretName: newrelic-bundle-k8s-agents-oper-controller-manager-service-cert
---
# Source: nri-bundle/charts/kube-state-metrics/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: newrelic-bundle-kube-state-metrics
  namespace: newrelic
  labels:
    helm.sh/chart: kube-state-metrics-5.30.1
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: metrics
    app.kubernetes.io/part-of: kube-state-metrics
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/version: "2.15.0"
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: kube-state-metrics
      app.kubernetes.io/instance: newrelic-bundle
  replicas: 1
  strategy:
    type: RollingUpdate
  revisionHistoryLimit: 10
  template:
    metadata:
      labels:
        helm.sh/chart: kube-state-metrics-5.30.1
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: metrics
        app.kubernetes.io/part-of: kube-state-metrics
        app.kubernetes.io/name: kube-state-metrics
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/version: "2.15.0"
    spec:
      automountServiceAccountToken: true
      hostNetwork: false
      serviceAccountName: newrelic-bundle-kube-state-metrics
      securityContext:
        fsGroup: 65534
        runAsGroup: 65534
        runAsNonRoot: true
        runAsUser: 65534
        seccompProfile:
          type: RuntimeDefault
      containers:
      - name: kube-state-metrics
        args:
        - --port=8080
        - --resources=certificatesigningrequests,configmaps,cronjobs,daemonsets,deployments,endpoints,horizontalpodautoscalers,ingresses,jobs,leases,limitranges,mutatingwebhookconfigurations,namespaces,networkpolicies,nodes,persistentvolumeclaims,persistentvolumes,poddisruptionbudgets,pods,replicasets,replicationcontrollers,resourcequotas,secrets,services,statefulsets,storageclasses,validatingwebhookconfigurations,volumeattachments
        - --metric-labels-allowlist=pods=[*],namespaces=[*],deployments=[*]
        - --metric-annotations-allowlist=pods=[*],namespaces=[*],deployments=[*]
        imagePullPolicy: IfNotPresent
        image: registry.k8s.io/kube-state-metrics/kube-state-metrics:v2.15.0
        ports:
        - containerPort: 8080
          name: "http"
        livenessProbe:
          failureThreshold: 3
          httpGet:
            httpHeaders:
            path: /livez
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 5
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        readinessProbe:
          failureThreshold: 3
          httpGet:
            httpHeaders:
            path: /readyz
            port: 8081
            scheme: HTTP
          initialDelaySeconds: 5
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          {}
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-infra-operator
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: newrelic-bundle
      app.kubernetes.io/name: newrelic-infra-operator
  template:
    metadata:
      annotations:
        checksum/config: f706e4cc6433522c1b165112bf7c5312c97f6cb920b90dbfffbfa511d7f96e2c
        checksum/secret: 01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b
      labels:
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/name: newrelic-infra-operator
    spec:
      serviceAccountName: newrelic-bundle-newrelic-infra-operator
      securityContext:
        fsGroup: 1001
        runAsGroup: 1001
        runAsUser: 1001
      containers:
      - name: newrelic-infra-operator
        image: "newrelic/newrelic-infra-operator:0.26.0"
        imagePullPolicy: "IfNotPresent"
        env:
        - name: CLUSTER_NAME
          value: kmullaney-gts-training-k8s-8
        - name: NRIA_LICENSE_KEY
          valueFrom:
            secretKeyRef:
              name: newrelic-secrets
              key: newRelicLicenseKey
        volumeMounts:
        - name: config
          mountPath: /etc/newrelic/newrelic-infra-operator/
        - name: tls-key-cert-pair
          mountPath: /tmp/k8s-webhook-server/serving-certs/
        readinessProbe:
          httpGet:
            path: /healthz
            port: 9440
          initialDelaySeconds: 1
          periodSeconds: 1
        resources:
          limits:
            memory: 80M
          requests:
            cpu: 100m
            memory: 30M
      volumes:
      - name: config
        configMap:
          name: newrelic-bundle-newrelic-infra-operator-config
      - name: tls-key-cert-pair
        secret:
          secretName: newrelic-bundle-newrelic-infra-operator-admission
      nodeSelector:
        kubernetes.io/os: linux


      tolerations:
        - effect: NoSchedule
          key: eks.amazonaws.com/compute-type
          operator: Equal
          value: fargate
      hostNetwork: false
---
# Source: nri-bundle/charts/newrelic-infrastructure/templates/ksm/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infrastructure
    app.kubernetes.io/version: 3.49.0
    helm.sh/chart: newrelic-infrastructure-3.54.0
    mode: privileged
  name: newrelic-bundle-nrk8s-ksm
spec:
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app.kubernetes.io/instance: newrelic-bundle
      app.kubernetes.io/name: newrelic-infrastructure
      app.kubernetes.io/component: ksm
  template:
    metadata:
      annotations:
        checksum/nri-kubernetes: a097f132e8ad72300c9149415445a3c04f7951fccc7c91ddf1fb984f04e821b2
        checksum/agent-config: 93b04df2a093c1711785ed30c9c2b01a4b85d10d26bab2ed86bf5366d98506f5
      labels:
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/name: newrelic-infrastructure
        mode: privileged
        app.kubernetes.io/component: ksm
    spec:
      serviceAccountName: newrelic-bundle-newrelic-infrastructure
      hostNetwork: false
      containers:
        - name: ksm
          image: "newrelic/nri-kubernetes:3.49.0"
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsGroup: 2000
            runAsUser: 1000
          env:
            - name: "NRI_KUBERNETES_SINK_HTTP_PORT"
              value: "8002"
            - name: "NRI_KUBERNETES_CLUSTERNAME"
              value: kmullaney-gts-training-k8s-8
            - name: "NRI_KUBERNETES_VERBOSE"
              value: "false"
            - name: "NRI_KUBERNETES_KSM_ENABLERESOURCEQUOTASAMPLES"
              value: "true"
            - name: "NRI_KUBERNETES_NODENAME"
              valueFrom:
                fieldRef:
                  apiVersion: "v1"
                  fieldPath: "spec.nodeName"
          volumeMounts:
            - name: nri-kubernetes-config
              mountPath: /etc/newrelic-infra/nri-kubernetes.yml
              subPath: nri-kubernetes.yml
          resources:
            limits:
              memory: 850M
            requests:
              cpu: 100m
              memory: 150M
        - name: forwarder
          image: "newrelic/k8s-events-forwarder:1.71.0"
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsGroup: 2000
            runAsUser: 1000
          ports:
            - containerPort: 8002
          env:
            - name: NRIA_LICENSE_KEY
              valueFrom:
                secretKeyRef:
                  name: newrelic-secrets
                  key: newRelicLicenseKey

            - name: "NRIA_DNS_HOSTNAME_RESOLUTION"
              value: "false"

            - name: "K8S_NODE_NAME"
              valueFrom:
                fieldRef:
                  apiVersion: "v1"
                  fieldPath: "spec.nodeName"
            - name: "NRIA_DISPLAY_NAME"
              value: "kmullaney-gts-training-k8s-8:$(K8S_NODE_NAME)"
          volumeMounts:
            - mountPath: /var/db/newrelic-infra/data
              name: forwarder-tmpfs-data
            - mountPath: /var/db/newrelic-infra/user_data
              name: forwarder-tmpfs-user-data
            - mountPath: /tmp
              name: forwarder-tmpfs-tmp
            - name: config
              mountPath: /etc/newrelic-infra.yml
              subPath: newrelic-infra.yml
          resources:
            limits:
              memory: 850M
            requests:
              cpu: 100m
              memory: 150M
      volumes:
        - name: nri-kubernetes-config
          configMap:
            name: newrelic-bundle-nrk8s-ksm
            items:
              - key: nri-kubernetes.yml
                path: nri-kubernetes.yml
        - name: forwarder-tmpfs-data
          emptyDir: {}
        - name: forwarder-tmpfs-user-data
          emptyDir: {}
        - name: forwarder-tmpfs-tmp
          emptyDir: {}
        - name: config
          configMap:
            name: newrelic-bundle-nrk8s-agent-ksm
            items:
              - key: newrelic-infra.yml
                path: newrelic-infra.yml
      affinity:
        podAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchLabels:
                  app.kubernetes.io/name: kube-state-metrics
              topologyKey: kubernetes.io/hostname
            weight: 100
      tolerations:
        - effect: NoSchedule
          operator: Exists
        - effect: NoExecute
          operator: Exists
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: nri-bundle/charts/nri-kube-events/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: newrelic-bundle-nri-kube-events
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-kube-events
    app.kubernetes.io/version: 2.16.1
    helm.sh/chart: nri-kube-events-3.16.1
  annotations:
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: nri-kube-events
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/name: nri-kube-events
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
      containers:
        - name: kube-events
          image: newrelic/nri-kube-events:2.16.1
          imagePullPolicy: IfNotPresent
          securityContext:
            privileged: false
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          args: ["-config", "/app/config/config.yaml", "-loglevel", "debug"]
          volumeMounts:
            - name: config-volume
              mountPath: /app/config
        - name: forwarder
          image: newrelic/k8s-events-forwarder:1.69.0
          imagePullPolicy: IfNotPresent
          securityContext:
            privileged: false
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          ports:
            - containerPort: 8001
          env:
            - name: NRIA_LICENSE_KEY
              valueFrom:
                secretKeyRef:
                  name: newrelic-secrets
                  key: newRelicLicenseKey

            - name: NRIA_OVERRIDE_HOSTNAME_SHORT
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: spec.nodeName

          volumeMounts:
            - mountPath: /var/db/newrelic-infra/data
              name: tmpfs-data
            - mountPath: /var/db/newrelic-infra/user_data
              name: tmpfs-user-data
            - mountPath: /tmp
              name: tmpfs-tmp
            - name: config
              mountPath: /etc/newrelic-infra.yml
              subPath: newrelic-infra.yml
      serviceAccountName: newrelic-bundle-nri-kube-events
      volumes:
        - name: config
          configMap:
            name: newrelic-bundle-nri-kube-events-agent-config
            items:
            - key: newrelic-infra.yml
              path: newrelic-infra.yml
        - name: config-volume
          configMap:
            name: newrelic-bundle-nri-kube-events-config
        - name: tmpfs-data
          emptyDir: {}
        - name: tmpfs-user-data
          emptyDir: {}
        - name: tmpfs-tmp
          emptyDir: {}
      nodeSelector:
        kubernetes.io/os: linux


      hostNetwork: false
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: newrelic-bundle-nri-metadata-injection
  namespace: newrelic
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: nri-metadata-injection
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/name: nri-metadata-injection
    spec:
      securityContext:
        fsGroup: 1001
        runAsUser: 1001
        runAsGroup: 1001
      hostNetwork: false
      containers:
      - name: nri-metadata-injection
        image: "newrelic/k8s-metadata-injection:1.38.1"
        imagePullPolicy: IfNotPresent
        env:
        - name: clusterName
          value: kmullaney-gts-training-k8s-8
        - name: NEW_RELIC_K8S_METADATA_INJECTION_PORT
          value: "8443"
        - name: NEW_RELIC_K8S_METADATA_INJECTION_HEALTH_PORT
          value: "8080"
        ports:
          - containerPort: 8443
            protocol: TCP
        volumeMounts:
        - name: tls-key-cert-pair
          mountPath: /etc/tls-key-cert-pair
        readinessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 1
          periodSeconds: 1
        resources:

          limits:
            memory: 80M
          requests:
            cpu: 100m
            memory: 30M
      volumes:
      - name: tls-key-cert-pair
        secret:
          secretName: newrelic-bundle-nri-metadata-injection-admission
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: nri-bundle/charts/newrelic-prometheus-agent/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-prometheus-agent
    app.kubernetes.io/version: v3.7.0-rc.0
    helm.sh/chart: newrelic-prometheus-agent-2.4.1
  name: newrelic-bundle-newrelic-prometheus-agent
  namespace: newrelic
spec:
  serviceName: newrelic-bundle-newrelic-prometheus-agent-headless
  selector:
    matchLabels:
      app.kubernetes.io/instance: newrelic-bundle
      app.kubernetes.io/name: newrelic-prometheus-agent
  replicas: 1
  template:
    metadata:
      annotations:
        checksum/config: c140601b9623040bf40b777b2c9e8a3b644ecdfac9ee4fc91a18e10e848fe97c
      labels:
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/name: newrelic-prometheus-agent
    spec:

      hostNetwork: false

      serviceAccountName: newrelic-bundle-newrelic-prometheus-agent

      initContainers:
        - name: configurator
          image: "newrelic/newrelic-prometheus-configurator:2.4.1"
          imagePullPolicy: IfNotPresent
          args:
            - --input=/etc/configurator/config.yaml
            - --output=/etc/prometheus/config/config.yaml
          volumeMounts:
            - name: configurator-config
              mountPath: /etc/configurator/
            - name: prometheus-config
              mountPath: /etc/prometheus/config
          env:
            - name: NR_PROM_DATA_SOURCE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: NR_PROM_LICENSE_KEY
              valueFrom:
                secretKeyRef:
                  name: newrelic-secrets
                  key: newRelicLicenseKey
            - name: NR_PROM_CHART_VERSION
              value: 2.4.1

      containers:
        - name: prometheus
          image: "quay.io/prometheus/prometheus:v3.7.0-rc.0"
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 9090
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /-/healthy
              port: 9090
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 15
            timeoutSeconds: 10
            failureThreshold: 3
            successThreshold: 1
          readinessProbe:
            httpGet:
              path: /-/ready
              port: 9090
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 5
            timeoutSeconds: 4
            failureThreshold: 3
            successThreshold: 1
          args:
            - --config.file=/etc/prometheus/config/config.yaml
            - --agent
            - --storage.agent.retention.max-time=30m
            - --storage.agent.wal-truncate-frequency=30m
            - --storage.agent.path=/etc/prometheus/storage
          volumeMounts:
            - name: prometheus-config
              mountPath: /etc/prometheus/config
            - name: prometheus-storage
              mountPath: /etc/prometheus/storage

      volumes:
        - name: configurator-config
          configMap:
            name: newrelic-bundle-newrelic-prometheus-agent
        - name: prometheus-config
          emptyDir: {}
        - name: prometheus-storage
          emptyDir: {}
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/instrumentation-crd.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: newrelic-bundle-k8s-agents-operator-mutation
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
webhooks:
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /mutate-newrelic-com-v1beta2-instrumentation
    failurePolicy: Fail
    name: minstrumentation-v1beta2.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1beta2
        operations:
          - CREATE
          - UPDATE
        resources:
          - instrumentations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /mutate-newrelic-com-v1beta1-instrumentation
    failurePolicy: Fail
    name: minstrumentation-v1beta1.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1beta1
        operations:
          - CREATE
          - UPDATE
        resources:
          - instrumentations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /mutate-newrelic-com-v1alpha2-instrumentation
    failurePolicy: Fail
    name: minstrumentation-v1alpha2.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1alpha2
        operations:
          - CREATE
          - UPDATE
        resources:
          - instrumentations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /mutate-v1-pod
    failurePolicy: Ignore
    name: mpod.kb.io
    rules:
      - apiGroups:
          - ""
        apiVersions:
          - v1
        operations:
          - CREATE
        resources:
          - pods
    sideEffects: None
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/admission-webhooks/mutatingWebhookConfiguration.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: newrelic-bundle-newrelic-infra-operator
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
webhooks:
- name: newrelic-infra-operator.newrelic.com
  clientConfig:
    service:
      name: newrelic-bundle-newrelic-infra-operator
      namespace: newrelic
      path: "/mutate-v1-pod"
    caBundle: ""
  rules:
  - operations: ["CREATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["pods"]
  failurePolicy: Ignore
  timeoutSeconds: 10
  sideEffects: NoneOnDryRun
  admissionReviewVersions:
  - v1
  reinvocationPolicy: IfNeeded
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/admission-webhooks/mutatingWebhookConfiguration.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: newrelic-bundle-nri-metadata-injection
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
webhooks:
- name: metadata-injection.newrelic.com
  clientConfig:
    service:
      name: newrelic-bundle-nri-metadata-injection
      namespace: newrelic
      path: "/mutate"
    caBundle: ""
  rules:
  - operations: ["CREATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["pods"]
    scope: Namespaced
  namespaceSelector:
    matchExpressions:
      - key: kubernetes.io/metadata.name
        operator: NotIn
        values: ["kube-public","kube-node-lease","kube-system"]
  failurePolicy: Ignore
  timeoutSeconds: 28
  sideEffects: None
  admissionReviewVersions: ["v1", "v1beta1"]
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/instrumentation-crd.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: newrelic-bundle-k8s-agents-operator-validation
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
webhooks:
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /validate-newrelic-com-v1beta2-instrumentation
    failurePolicy: Fail
    name: vinstrumentationcreateupdate-v1beta2.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1beta2
        operations:
          - CREATE
          - UPDATE
        resources:
          - instrumentations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /validate-newrelic-com-v1beta2-instrumentation
    failurePolicy: Ignore
    name: vinstrumentationdelete-v1beta2.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1beta2
        operations:
          - DELETE
        resources:
          - instrumentations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /validate-newrelic-com-v1beta1-instrumentation
    failurePolicy: Fail
    name: vinstrumentationcreateupdate-v1beta1.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1beta1
        operations:
          - CREATE
          - UPDATE
        resources:
          - instrumentations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /validate-newrelic-com-v1beta1-instrumentation
    failurePolicy: Ignore
    name: vinstrumentationdelete-v1beta1.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1beta1
        operations:
          - DELETE
        resources:
          - instrumentations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /validate-newrelic-com-v1alpha2-instrumentation
    failurePolicy: Fail
    name: vinstrumentationcreateupdate-v1alpha2.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1alpha2
        operations:
          - CREATE
          - UPDATE
        resources:
          - instrumentations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      service:
        name: newrelic-bundle-k8s-agents-operator-webhook-service
        namespace: newrelic
        path: /validate-newrelic-com-v1alpha2-instrumentation
    failurePolicy: Ignore
    name: vinstrumentationdelete-v1alpha2.kb.io
    rules:
      - apiGroups:
          - newrelic.com
        apiVersions:
          - v1alpha2
        operations:
          - DELETE
        resources:
          - instrumentations
    sideEffects: None
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/admission-webhooks/job-patch/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-infra-operator-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: newrelic-infra-operator-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/admission-webhooks/job-patch/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: newrelic-bundle-nri-metadata-injection-admission
  namespace: newrelic
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
---
# Source: nri-bundle/charts/k8s-agents-operator/templates/instrumentation-crd.yaml
apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  name: newrelic-bundle-k8s-agents-oper-controller-manager-service-cert
  annotations:
    "helm.sh/hook": "pre-install,pre-upgrade"
    "helm.sh/hook-delete-policy": "before-hook-creation"
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: k8s-agents-operator
    app.kubernetes.io/version: 0.32.2
    helm.sh/chart: k8s-agents-operator-0.32.2
    app.kubernetes.io/component: webhook
  namespace: newrelic
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQ1akNDQXM2Z0F3SUJBZ0lSQVBWS2NySCt2TkhFR1p4VVZsUVE4QlV3RFFZSktvWklodmNOQVFFTEJRQXcKS2pFb01DWUdBMVVFQXhNZmF6aHpMV0ZuWlc1MGN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVEFlRncweQpOVEV4TURneU1ETXlNemhhRncweU5qRXhNRGd5TURNeU16aGFNQzR4TERBcUJnTlZCQU1USTI1bGQzSmxiR2xqCkxXSjFibVJzWlMxck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eU1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0MKQVE4QU1JSUJDZ0tDQVFFQXdiQW12VEYrWm5nUXNYV3A5YkxyRWU1M3M2dnJRN3RvVlFybVBIeVljK1A3bnFPMgptSDdKWnAyOGFRRkFML2RiSTNuaFEzbnRFV1JQWW93OXVRM0ZOMktzYVM3NzlMQUlwckpJK0I5ZVY1NjJqK3ZLCm1BbFVvLzhUK2cxOHdJbzRYajJLcml5U1BhVmZvNGtwNDF5dzZhb0w0ajdkK2QvS0U1YzQ4U3ZSTlBmMzVjSWMKZ2wxWkd3OUpQZ0Jvb0FUcjVEM2VSYy9hQ3hZa1pxMmJOd2Z3dDlkNjllYThKTEQ5d0RhcDR3VXU2b0FmWGRKZQpQc0lwUXJyYTFxQ3JYSE1INUg2NVpPU21ZVXhDS1RSeDBaeGtMUmVaS1REc1VCYjRla1MvVk5EaVFCUk5Xb0RICi9CWG4zNThicDAyNmJiRGlhd3cwdS9MdnZYVW1XL2lBWVU4L2p3SURBUUFCbzRJQkFUQ0IvakFPQmdOVkhROEIKQWY4RUJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQgovd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVzZzAzbzAwOGxKSnpGZU8zWCt6ZnBPeUF3d2N3Z1owR0ExVWRFUVNCCmxUQ0Jrb0pBYm1WM2NtVnNhV010WW5WdVpHeGxMV3M0Y3kxaFoyVnVkSE10YjNCbGNtRjBiM0l0ZDJWaWFHOXYKYXkxelpYSjJhV05sTG01bGQzSmxiR2xqTG5OMlk0Sk9ibVYzY21Wc2FXTXRZblZ1Wkd4bExXczRjeTFoWjJWdQpkSE10YjNCbGNtRjBiM0l0ZDJWaWFHOXZheTF6WlhKMmFXTmxMbTVsZDNKbGJHbGpMbk4yWXk1amJIVnpkR1Z5CkxteHZZMkZzTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFBUW5aMkNFaTIzUmQ5NzJ4OGc2S0J1bDdRb1U1akoKbS92bnByWlRRN2tiWm43ZnplOUxiKytCVm5OUVM3UkhScGd4WkpITEVZV0MvYlozQ2h0bGhndmVSUWlWdFdWOAo3WlZPWStzcFBGQlJoQ2J6OHhnZjdFOEd2UERIVS9Ua2FWbk54cVJoK2c4S0F5ckFqVTJiYmFHaTZvd3drQjNqClFhMGFYL2pXWGhPTW90Ui8vaGJPNjVwcU5lelJ5Wk9YTXJSUFNjSXhNRGtRUXNNMDM0TkN5R2RJVkpKQW5CMHQKcGcwVVJaOWtrZG1jUW83T1Jaa3pwcW9jTWdNN2k3Nzh2bElPaU5mdDcwY3RKOVhNN2hGTmlGci9VbzI3MVpocgplSmdVN2dNTEpSWkgvdGsySUk0SVRzaDVaa09ZVkpnbGlLSndjN2dqcW54M2lsK0poaS9zQUFMVQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBd2JBbXZURitabmdRc1hXcDliTHJFZTUzczZ2clE3dG9WUXJtUEh5WWMrUDducU8yCm1IN0pacDI4YVFGQUwvZGJJM25oUTNudEVXUlBZb3c5dVEzRk4yS3NhUzc3OUxBSXBySkkrQjllVjU2MmordksKbUFsVW8vOFQrZzE4d0lvNFhqMktyaXlTUGFWZm80a3A0MXl3NmFvTDRqN2QrZC9LRTVjNDhTdlJOUGYzNWNJYwpnbDFaR3c5SlBnQm9vQVRyNUQzZVJjL2FDeFlrWnEyYk53Znd0OWQ2OWVhOEpMRDl3RGFwNHdVdTZvQWZYZEplClBzSXBRcnJhMXFDclhITUg1SDY1Wk9TbVlVeENLVFJ4MFp4a0xSZVpLVERzVUJiNGVrUy9WTkRpUUJSTldvREgKL0JYbjM1OGJwMDI2YmJEaWF3dzB1L0x2dlhVbVcvaUFZVTgvandJREFRQUJBb0lCQUJKajZTQWV6WWFjeXAzRgpUT08zaFhSVmFFNHdZSE9iVUZCK0JLT0swRFIxak8yVHVqVFU1cFBCaEZaZ0JRYkk0K2ZSYWJpdEJzaktqei9hCld2M3h0MTl0ZTZHMnF1N1VmenFXUkRGbUlST210R1RYR1l4Yk5OZjBuenYwTkVoWlpDeFp1eVZnZ21yNGFjVkkKVEk3Z2lmZXZVUW54VWNVUFZHVW1tTkZMdk1WQ3hpK2RFVFZhaStrRHFUdnlhZ2pEMnJ0QncwQk5TS0pGN1doZwo1OTJzQmNxSHB6Zm5ZZXNaUkhzdFVMdjcxUHBIcnUwdWRmZVdIbXdIS0dQWkwyZERyTmR3U1NmUUpKZlh2aTdnCnZtci91SFJyV1ovb084MU84c3dJVkZVcVJZbkpPUTlHbEhobVZJWlF1YlJTQ3Y4VmdRUFFtT3ppUW13eTlLUDQKUzdmOW1za0NnWUVBMVBxOGZGdWcyRVJ4bDBTTHFMZFIxcWtJMktGZW9mUnZmSWp0OEtEVnhEd2hLOU8zczBNUwoyV01TWGFJcmttSTBNWTJ5cnZlRVA5WVRqNkxWTUZmUDRYTW5MSVhPSkVkMFBGdWo0TENSeCtUTGpGcU01aDA4CjlNQW0xZ3hRM3R4d2xFVTBFNmhtV1FFMEpUTTJyZXBxNGYyR3g4eTNYems5Rks2MytjSmV6dk1DZ1lFQTZNL1oKeHZ5bzZ2Y3pTYXpSVzN4NDJWRnZmSHhvT253UVJySlE5c3ZJSXRFMVRhVmhXMDZLb2xWeTNQYnVNUUwzWnRaSApaVDE2MVFWZ0pSYnl3RUZiZEdIeEtRK1Vnenl0QjZsamppK083SVJOMy9ZN1Y1bnhjN1k4ZU1URzAvZnRiWng4Ck55dW4rNjdtRGNsUmpjdVYrWFpFWXBTTElrSUdhMU1kdStMR1MvVUNnWUVBdUJyM0RGajR0WHFVNXJvdUwrNG8KSkhPQ1hpRkFlS2VnSi9zR0ZGZ3o4YW80MG5YMStsUWsyeDQxSmhPbHJxaU5qYmg3bVp3RkNsbTRGeFlmUytiYwpvSHEyaGxvMFZGQWdQbnpKTU5YeGJ1WnN2aXNZV1dNMDZpMmdaSy9JeUoydUE3Mit3cTl6cWNUTW1zdW1uTGhqCkpHL1FMcTdjWk1oSjhMTUgvakx6V2RrQ2dZQUVsOTAzRk5NTVY3WTJWT2VJZzRzcTFuVjVva2E0S0t4MWlKMGEKVVdqd2J1bzdUdkQ5eVMzcENBQ05KWDRMajRCc0VmdzBuaUxuUXdUamxuRlJvN2gzTWx0OHNPY0FNOWxDRm5CMQpaTERRTDhnTmpDRWRtRmJ3TG45QTdyanhnNm0yaU9qV2VkRUZvU3kreHVNS0JpTStXYnY5cWVxWTBXNm8vV25QCnhDaWZaUUtCZ0R1ZEU4c2ZFSEZKbUlHMmRKSE85M1hINUJBcWwvTVdvN1BuOGZoLzF2RGl1SmtPMytzc1VCb3oKbU5KZlBDdXREellHSmtPaStaTnNuanl1N2Y5Tmh5WnN1SHVmSS95ZnhhTEZnZ3RnRjRnRGpNR3NqM1c3azRNZgpHTmFoRlVMWXByM2NrM3FZK0xHSVFqNkRBWEt0OXl4Z3BKQjJvYVZ6UjZZdTFHTmllRjJnCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQekNDQWllZ0F3SUJBZ0lRTGtrTlduR3R0TTN3dElEMkt3TkFjREFOQmdrcWhraUc5dzBCQVFzRkFEQXEKTVNnd0pnWURWUVFERXg5ck9ITXRZV2RsYm5SekxXOXdaWEpoZEc5eUxXOXdaWEpoZEc5eUxXTmhNQjRYRFRJMQpNVEV3T0RJd016SXpPRm9YRFRJMk1URXdPREl3TXpJek9Gb3dLakVvTUNZR0ExVUVBeE1mYXpoekxXRm5aVzUwCmN5MXZjR1Z5WVhSdmNpMXZjR1Z5WVhSdmNpMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBTWsrOUtoY2ovSzI4UzQyeCtzOWxudElNQlZOVzRoVmNPUHdlNjFMSnkzV0R1dDJpVmJXQTRzTgpQUHJtaTVRa0VFazY0Tzh4SDFLRmZ2NDRhaWlWdkd3dVlSNTl3NUg1VHVFV3kzRm1lbUFMODRUeEFIU3lTUHZUCklwVERqSTNVcStmdWhtUlVsSXdhTXpsaCtPVUdZMzcvU1ZodERadGFDbHZlN3YrbGVHU2ZRMlhkblBWRitOdGEKZkNFRjIwVU96dWVxVUdRUThqY2NpUU8xZjdjTVVGVXRsejh4Mlc3VzhaRkRqVXhvNVRoY0k1OS9kVGR6WkhwMwpyNmh1Z21OTC9OamZlYTlZWXluS2l0MHI0NXpLbzJNTHR3ZGViZFdSL3NuNmJ2SWZ4ZEc3L3NjYmxPeXBrcU9uCm1JNm9tNi94aVVwVnBpeTAyMDcwSE80V0tPTGdYd01DQXdFQUFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2sKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFILwpNQjBHQTFVZERnUVdCQlN5RFRlalRUeVVrbk1WNDdkZjdOK2s3SUREQnpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DCkFRRUFwdWlDelovVGF4V2gvdGZWS1FvNkpJSjhkeEQ3cmYwYytCbUhNbS9HODd5d1lFcHNHQ29iazlCZ1ZKdkkKOTBkSHdyTjIvYzd4UnBuUVU3eGVSZ25aUVJ0aHRldXMxeWpzV0NMUkExc2diQnZ0d3hGSm5Ba1I5M01EYmtVYQpRWVAybWJnUitZYVd1WmJWeHJrMjZaTEJ6OFRtNFdOeWpaWmtrQ1NHQWJoWmhObDFINzlFbW10VllBRzdyd1BYCjZ4QXdpKzVoeXlDTW5lZWJQSDZFZW45a2VSVzl5cjR5KytCcWVhMWZZT3NXTVBaVk1mTjRJRmw4OVY3eEgzMDMKVHRURkQ3ckNLSEprc3BrZFB3QXBBcmY0Z2xhd1M3TXM3SlNLdmN2K3dabG0zeWJONlVZK0lWYjkrNmFHQ29ISwpKYzhUSjA5WUF2dUZ6cFROWU5IVm1BcmRDZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/admission-webhooks/job-patch/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-newrelic-infra-operator-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: newrelic-infra-operator-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
rules:
  - apiGroups:
      - admissionregistration.k8s.io
    resources:
      - mutatingwebhookconfigurations
    verbs:
      - get
      - update
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/admission-webhooks/job-patch/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: newrelic-bundle-nri-metadata-injection-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
rules:
  - apiGroups:
      - admissionregistration.k8s.io
    resources:
      - mutatingwebhookconfigurations
    verbs:
      - get
      - update
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/admission-webhooks/job-patch/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: newrelic-bundle-newrelic-infra-operator-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: newrelic-infra-operator-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-newrelic-infra-operator-admission
subjects:
  - kind: ServiceAccount
    name: newrelic-bundle-newrelic-infra-operator-admission
    namespace: newrelic
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/admission-webhooks/job-patch/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: newrelic-bundle-nri-metadata-injection-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
    app: nri-metadata-injection-admission
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: newrelic-bundle-nri-metadata-injection-admission
subjects:
  - kind: ServiceAccount
    name: newrelic-bundle-nri-metadata-injection-admission
    namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/admission-webhooks/job-patch/role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-infra-operator-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: newrelic-infra-operator-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
rules:
  - apiGroups:
      - ""
    resources:
      - secrets
    verbs:
      - get
      - create
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/admission-webhooks/job-patch/role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: newrelic-bundle-nri-metadata-injection-admission
  namespace: newrelic
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
rules:
  - apiGroups:
      - ""
    resources:
      - secrets
    verbs:
      - get
      - create
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/admission-webhooks/job-patch/rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-infra-operator-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: newrelic-infra-operator-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: newrelic-bundle-newrelic-infra-operator-admission
subjects:
  - kind: ServiceAccount
    name: newrelic-bundle-newrelic-infra-operator-admission
    namespace: newrelic
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/admission-webhooks/job-patch/rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: newrelic-bundle-nri-metadata-injection-admission
  namespace: newrelic
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: nri-metadata-injection-admission
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: newrelic-bundle-nri-metadata-injection-admission
subjects:
  - kind: ServiceAccount
    name: newrelic-bundle-nri-metadata-injection-admission
    namespace: newrelic
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/admission-webhooks/job-patch/job-createSecret.yaml
apiVersion: batch/v1
kind: Job
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-infra-operator-admission-create
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: newrelic-infra-operator-admission-create
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
spec:
  template:
    metadata:
      name: newrelic-bundle-newrelic-infra-operator-admission-create
      labels:
        app: newrelic-infra-operator-admission-create
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/name: newrelic-infra-operator
    spec:
      containers:
        - name: create
          image: "registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.3.0"
          imagePullPolicy: IfNotPresent
          args:
            - create
            - --host=newrelic-bundle-newrelic-infra-operator,newrelic-bundle-newrelic-infra-operator.newrelic.svc
            - --namespace=newrelic
            - --secret-name=newrelic-bundle-newrelic-infra-operator-admission
            - --cert-name=tls.crt
            - --key-name=tls.key
      restartPolicy: OnFailure
      serviceAccountName: newrelic-bundle-newrelic-infra-operator-admission
      securityContext:
        runAsGroup: 2000
        runAsNonRoot: true
        runAsUser: 2000
      nodeSelector:
        kubernetes.io/os: linux


      tolerations:
        - effect: NoSchedule
          key: eks.amazonaws.com/compute-type
          operator: Equal
          value: fargate
---
# Source: nri-bundle/charts/newrelic-infra-operator/templates/admission-webhooks/job-patch/job-patchWebhook.yaml
apiVersion: batch/v1
kind: Job
metadata:
  namespace: newrelic
  name: newrelic-bundle-newrelic-infra-operator-admission-patch
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: newrelic-infra-operator-admission-patch
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: newrelic-infra-operator
    app.kubernetes.io/version: 0.26.0
    helm.sh/chart: newrelic-infra-operator-2.18.0
spec:
  template:
    metadata:
      name: newrelic-bundle-newrelic-infra-operator-admission-patch
      labels:
        app: newrelic-infra-operator-admission-patch
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: newrelic-infra-operator
        app.kubernetes.io/version: 0.26.0
        helm.sh/chart: newrelic-infra-operator-2.18.0
    spec:
      containers:
        - name: patch
          image: "registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.3.0"
          imagePullPolicy: IfNotPresent
          args:
            - patch
            - --webhook-name=newrelic-bundle-newrelic-infra-operator
            - --namespace=newrelic
            - --secret-name=newrelic-bundle-newrelic-infra-operator-admission
            - --patch-failure-policy=Ignore
            - --patch-validating=false
      restartPolicy: OnFailure
      serviceAccountName: newrelic-bundle-newrelic-infra-operator-admission
      securityContext:
        runAsGroup: 2000
        runAsNonRoot: true
        runAsUser: 2000
      nodeSelector:
        kubernetes.io/os: linux


      tolerations:
        - effect: NoSchedule
          key: eks.amazonaws.com/compute-type
          operator: Equal
          value: fargate
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/admission-webhooks/job-patch/job-createSecret.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: newrelic-bundle-nri-metadata-injection-admission-create
  namespace: newrelic
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: nri-metadata-injection-admission-create
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
spec:
  template:
    metadata:
      name: newrelic-bundle-nri-metadata-injection-admission-create
      labels:
        app: nri-metadata-injection-admission-create
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: nri-metadata-injection
        app.kubernetes.io/version: 1.38.1
        helm.sh/chart: nri-metadata-injection-4.30.1
    spec:
      containers:
        - name: create
          image: "registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3"
          imagePullPolicy: IfNotPresent
          args:
            - create
            - --host=newrelic-bundle-nri-metadata-injection,newrelic-bundle-nri-metadata-injection.newrelic.svc
            - --namespace=newrelic
            - --secret-name=newrelic-bundle-nri-metadata-injection-admission
            - --cert-name=tls.crt
            - --key-name=tls.key
      restartPolicy: OnFailure
      serviceAccountName: newrelic-bundle-nri-metadata-injection-admission
      securityContext:
        runAsGroup: 2000
        runAsNonRoot: true
        runAsUser: 2000
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: nri-bundle/charts/nri-metadata-injection/templates/admission-webhooks/job-patch/job-patchWebhook.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: newrelic-bundle-nri-metadata-injection-admission-patch
  namespace: newrelic
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    app: nri-metadata-injection-admission-patch
    app.kubernetes.io/instance: newrelic-bundle
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nri-metadata-injection
    app.kubernetes.io/version: 1.38.1
    helm.sh/chart: nri-metadata-injection-4.30.1
spec:
  template:
    metadata:
      name: newrelic-bundle-nri-metadata-injection-admission-patch
      labels:
        app: nri-metadata-injection-admission-patch
        app.kubernetes.io/instance: newrelic-bundle
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: nri-metadata-injection
        app.kubernetes.io/version: 1.38.1
        helm.sh/chart: nri-metadata-injection-4.30.1
    spec:
      containers:
        - name: patch
          image: "registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3"
          imagePullPolicy: IfNotPresent
          args:
            - patch
            - --webhook-name=newrelic-bundle-nri-metadata-injection
            - --namespace=newrelic
            - --secret-name=newrelic-bundle-nri-metadata-injection-admission
            - --patch-failure-policy=Ignore
            - --patch-validating=false
      restartPolicy: OnFailure
      serviceAccountName: newrelic-bundle-nri-metadata-injection-admission
      securityContext:
        runAsGroup: 2000
        runAsNonRoot: true
        runAsUser: 2000
      nodeSelector:
        kubernetes.io/os: linux
